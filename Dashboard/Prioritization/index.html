<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฏุงุดุจูุฑุฏ ุฑุงูุจุฑ ู ุงูููุช ุจูุฏ ุชฺฉูู ูพุฑูฺู ูุง ุฒุฑุณุงุฎุช ููฺฉโุขุจุฑูุฏ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            direction: rtl;
            background-color: #f1f5f9;
            overflow-x: hidden; /* ุงุถุงูู ุดุฏู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุณฺฉุฑูู ุงูู */
        }
        .logo-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem 1rem; /* ุงุตูุงุญ ุดุฏู ุจุฑุง ุงุฌุงุฏ ูุงุตูู ุงุฒ ฺฉูุงุฑ */
        }
        .logo { height: 90px; width: auto; object-fit: contain; }
        .logo.center { height: 180px; }
        .logo.right { height: 100px; }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .tooltip { position: relative; display: inline-block; }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 340px;
            background-color: #f8fafc;
            color: #334155;
            text-align: right;
            border-radius: 8px;
            padding: 1rem;
            position: absolute;
            z-index: 10;
            bottom: 115%;
            left: 50%;
            margin-left: -170px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
            line-height: 1.7;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
        .slider { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; border-radius: 4px; background-color: #e2e8f0; outline: none; }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none; width: 24px; height: 24px; border-radius: 50%;
            cursor: pointer; background-color: var(--thumb-color); border: 4px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .slider::-moz-range-thumb {
            width: 24px; height: 24px; border-radius: 50%; cursor: pointer;
            background-color: var(--thumb-color); border: 4px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .reset-btn {
            background-color: #475569; color: white; font-weight: bold; padding: 0.5rem 1rem;
            border-radius: 0.5rem; transition: background-color 0.2s;
        }
        .reset-btn:hover { background-color: #334155; }
        .priority-matrix-cell {
            display: flex; justify-content: center; align-items: center; width: 100%; height: 60px;
            color: white; font-weight: 800; font-size: 1.25rem; border-radius: 0.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.4); transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .priority-matrix-cell:hover { transform: scale(1.1); box-shadow: 0 8px 20px rgba(0,0,0,0.2); z-index: 5; }
        .matrix-tooltip .tooltiptext { 
            width: 450px; 
            margin-left: -225px; 
            background-color: #1e293b; 
            color: #e2e8f0; 
            text-align: right; 
            font-size: 0.8rem;
            line-height: 1.6;
        }
        .timeline-item { position: relative; padding-bottom: 2rem; padding-right: 2.5rem; border-right: 2px solid #cbd5e1; }
        .timeline-item:last-child { border-right: 2px solid transparent; }
        .timeline-icon {
            position: absolute; right: -21px; top: 0; display: flex; align-items: center; justify-content: center;
            width: 40px; height: 40px; border-radius: 50%; background-color: white; border: 2px solid #cbd5e1;
        }
        #scenario-card {
            border-right: 5px solid;
            transition: border-color 0.5s ease;
        }
        .intro-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
        }
        #control-panel-card {
            transition: background-color 0.3s ease, padding 0.3s ease;
        }
        #control-panel-card.closed {
            background-color: #e2e8f0;
            padding: 1rem;
        }
        #control-panel-card.closed:hover {
            background-color: #f1f5f9; /* Lighter grey on hover when closed */
        }
    </style>
</head>
<body class="text-slate-800">

    <header class="bg-white shadow-sm">
        <div class="logo-container">
            <img src="https://uploadkon.ir/uploads/c1c428_25logo-IMPcoPNG.png" alt="ููฺฏู ุงุฏู ูพุฑุฏุงุฒ ูุญุท" class="logo">
            <img src="https://uploadkon.ir/uploads/df5427_25NA-LOGO-copy.png" alt="ููฺฏู ููฺฉ ุขุจุฑูุฏ" class="logo center">
            <img src="https://uploadkon.ir/uploads/611127_25OMS-LOGO-copy.png" alt="ููฺฏู ุนูุฑุงู ูุณฺฉู ุดูุงู" class="logo right">
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-6">
        <div class="card intro-card mb-6">
            <div class="text-center">
                 <h1 class="text-2xl font-bold text-slate-800 mb-3">ุฏุงุดุจูุฑุฏ ุฑุงูุจุฑ ู ุงูููุช ุจูุฏ ุชฺฉูู ูพุฑูฺู ูุง ุฒุฑุณุงุฎุช ููฺฉโุขุจุฑูุฏ</h1>
                 <p class="text-slate-600 max-w-4xl mx-auto mb-6 text-sm">ูุฏู ุงู ุฏุงุดุจูุฑุฏุ ุชุจุฏู ุงูููุชโูุง ุฑุงูุจุฑุฏ ุจู ฺฉ ููุดู ุฑุงู ุงุฌุฑุง ูุฏูู ู ุฏุงุฏูโูุญูุฑ ุงุณุช. ุงู ุงุจุฒุงุฑ ุจุฑ ุงุณุงุณ ฺฉ ุฑูุดโุดูุงุณ ุชุญูู ุฏู ูุฑุญููโุง ุนูู ูโููุงุฏ ฺฉู ูุฑุขูุฏ ุชุตููโฺฏุฑ ุฑุง ุณุงุฎุชุงุฑููุฏ ู ุดูุงู ูโุณุงุฒุฏ:</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="p-4 rounded-lg bg-slate-50">
                    <h3 class="font-bold text-slate-700 mb-2">ูุฑุญูู ุงูู: ูุฒูโุฏู ุจู ูุนุงุฑูุง ุฑุงูุจุฑุฏ (ุฑูุด AHP)</h3>
                    <p class="text-sm text-slate-600">ุฏุฑ ฺฏุงู ูุฎุณุชุ ุจุง ุจูโฺฉุงุฑฺฏุฑ <strong class="text-indigo-600">ูุฑุขูุฏ ุชุญูู ุณูุณููโูุฑุงุชุจ (AHP)</strong>ุ ุงููุช ูุณุจ ูุฑ ฺฉ ุงุฒ ูุนุงุฑูุง ฺฉูุงู ูุฏุฑุช ุชุนู ูโฺฏุฑุฏุฏ. ุงู ูุฒูโูุง ฺฉู ููุนฺฉุณโฺฉููุฏู <strong class="text-indigo-600">ุฏุฏฺฏุงู ู ุฌูุชโฺฏุฑโูุง ุฑุงูุจุฑุฏ</strong> ุณุงุฒูุงู ูุณุชูุฏุ ูุจูุง ุงุตู ุชุญูู ุฑุง ุชุดฺฉู ูโุฏููุฏ.</p>
                </div>
                <div class="p-4 rounded-lg bg-slate-50">
                    <h3 class="font-bold text-slate-700 mb-2">ูุฑุญูู ุฏูู: ุฑุชุจูโุจูุฏ ฺฏุฒููโูุง (ุฑูุด TOPSIS)</h3>
                    <p class="text-sm text-slate-600">ุฏุฑ ฺฏุงู ุฏููุ ูุงุชุฑุณ ุชุตูู (ุดุงูู ุฏุงุฏูโูุง ดฐ ูพุฑูฺู) ุจุง ุงุณุชูุงุฏู ุงุฒ <strong class="text-teal-600">ุงูฺฏูุฑุชู TOPSIS</strong> ูพุฑุฏุงุฒุด ูโุดูุฏ. ุงู ุฑูุดุ ูุฑ ฺฏุฒูู ุฑุง ุจุฑ ุงุณุงุณ ูุฒุงู ุดุจุงูุช ุจู <strong class="text-teal-600">ยซุฑุงูโุญู ุงุฏูโุขู ูุซุจุชยป</strong> ู ูุงุตูู ุงุฒ <strong class="text-teal-600">ยซุฑุงูโุญู ุงุฏูโุขู ูููยป</strong> ุงุฑุฒุงุจ ู ุฑุชุจูโุจูุฏ ูโููุงุฏ.</p>
                </div>
            </div>
             <div class="border-t border-slate-200 mt-6 pt-4">
                <h4 class="font-bold text-slate-700 text-sm mb-2">ูุงุจูุช ุชุญูู ุณูุงุฑู:</h4>
                <p class="text-xs text-slate-500 leading-relaxed">
                    ุงู ุฏุงุดุจูุฑุฏ ุงุฒ ูุงุจูุช ุชุนุงูู ุจุฑุง ุชุญูู ุณูุงุฑู ุจุฑุฎูุฑุฏุงุฑ ุงุณุช. ุงู ูฺฺฏ ุจู ฺฉุงุฑุจุฑ ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุงุฒ ุทุฑู ุงุณูุงุฏุฑูุง ุชุนุจู ุดุฏูุ ูุฒูโูุง ุฑุงูุจุฑุฏ ุฑุง ุชุบุฑ ุฏุงุฏู ู ุชุฃุซุฑ ุณูุงุฑููุง ูุฏุฑุช ูุฎุชูู ุฑุง ุจุฑ ุฑุชุจูโุจูุฏ ููุง ูพุฑูฺูโูุง ูุดุงูุฏู ููุงุฏ. ุจุง ูุฑ ุชุบุฑุ ูุชุงุฌ ุจู ุตูุฑุช ุขู ุจูโุฑูุฒุฑุณุงู ูโุดููุฏ.
                    <br><strong>ุฎุฑูุฌ ููุงุ</strong> ฺฉ ุฑุชุจูโุจูุฏ ุฌุงูุน ุงุฒ ูพุฑูฺูโูุง ุงุณุช ฺฉู ูุจูุง ุนูุ ุดูุงู ู ูุงุจู ุฏูุงุน ุจุฑุง ุชุฎุตุต ุจููู ููุงุจุน ู ุณุฑูุงูโฺฏุฐุงุฑโูุง ุขุช ูุฑุงูู ูโุขูุฑุฏ.
                </p>
             </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
             <div class="card text-center tooltip">
                <h3 class="text-lg font-bold" style="color:#7a5195;">ุถุฑูุฑุช ู ุชุฃุซุฑ ุงุฌุชูุงุน</h3>
                <p id="social-card-value" class="text-4xl font-extrabold my-2" style="color:#7a5195;"></p>
                <p class="text-xs text-slate-500">ูพุงุณุฎฺฏู ุจู ูุงุฒูุง ุงุณุงุณ</p>
                <div class="tooltiptext">
                    <p class="mb-3">ุงู ุจูุนุฏุ ูพุฑูฺูโูุง ุฑุง ุฏุฑ ุงูููุช ูุฑุงุฑ ูโุฏูุฏ ฺฉู <strong style="color:#7a5195;">ูุงุฒูุง ุญุงุช</strong> ุณุงฺฉูุงู ุฑุง ุจุฑุทุฑู ฺฉุฑุฏูุ <strong style="color:#7a5195;">ฺฉูุจูุฏูุง ุฒุฑุณุงุฎุช</strong> ุฑุง ุฌุจุฑุงู ูโฺฉููุฏ ู ุจู ุจุดุชุฑู ุฌูุนุช ููฺฉู ุฎุฏูุชโุฑุณุงู ูโููุงูุฏ. ุงู ุงุตู ูุณุชููุงู ุจู <strong style="color:#7a5195;">ุฑูุน ูุงุจุฑุงุจุฑ</strong> ู ุงุฑุชูุง <strong style="color:#7a5195;">ุจูุฏุงุดุช ู ุงูู ุนููู</strong> ูโูพุฑุฏุงุฒุฏ.</p>
                    <h4 class="font-bold text-sm mb-2 border-t border-slate-300 pt-2">ุฒุฑุดุงุฎุตโูุง ฺฉูุฏ:</h4>
                    <ul class="text-sm list-none p-0">
                        <li class="flex items-center mb-1"><span class="w-3 h-3 rounded-full ml-2" style="background-color: #7a5195;"></span>ุฑูุน ฺฉูุจูุฏูุง ุญุงุช</li>
                        <li class="flex items-center mb-1"><span class="w-3 h-3 rounded-full ml-2" style="background-color: #7a5195;"></span>ุฌูุนุช ุชุญุช ูพูุดุด</li>
                        <li class="flex items-center"><span class="w-3 h-3 rounded-full ml-2" style="background-color: #7a5195;"></span>ุงุฑุชูุง ุจูุฏุงุดุช ู ุงูู</li>
                    </ul>
                </div>
            </div>
             <div class="card text-center tooltip">
                <h3 class="text-lg font-bold" style="color:#ef5675;">ุชูุฌู ุงูุชุตุงุฏ ู ูุงู</h3>
                <p id="economic-card-value" class="text-4xl font-extrabold my-2" style="color:#ef5675;"></p>
                <p class="text-xs text-slate-500">ฺฉุงุฑุง ูุฒูู ู ุจูููโุณุงุฒ ููุงุจุน</p>
                <div class="tooltiptext">
                    <p class="mb-3">ุงู ุจูุนุฏุ ฺฉุงุฑุง ุชุฎุตุต ููุงุจุน ูุญุฏูุฏ ูุงู ุฑุง ูโุณูุฌุฏ. ูพุฑูฺูโูุง ฺฉู <strong style="color:#ef5675;">ูุฒูู ฺฉูุชุฑ ุจู ุงุฒุง ูุฑ ุฎุงููุงุฑ</strong> ุจูุฑูโููุฏ ุฏุงุฑูุฏ (ฺฉุงุฑุง ุจุงูุงุชุฑ) ู <strong style="color:#ef5675;">ูุฒูู ฺฉู ฺฉูุชุฑ</strong> ุฏุงุฑูุฏุ ุฏุฑ ุงูููุช ูุฑุงุฑ ูโฺฏุฑูุฏ ุชุง ุจุงุฒุฏู ุณุฑูุงูโฺฏุฐุงุฑ ุญุฏุงฺฉุซุฑ ุดูุฏ.</p>
                     <h4 class="font-bold text-sm mb-2 border-t border-slate-300 pt-2">ุฒุฑุดุงุฎุตโูุง ฺฉูุฏ:</h4>
                    <ul class="text-sm list-none p-0">
                        <li class="flex items-center mb-1"><span class="w-3 h-3 rounded-full ml-2" style="background-color: #ef5675;"></span>ูุฒูู ุจู ุงุฒุง ูุฑ ุฎุงููุงุฑ</li>
                        <li class="flex items-center"><span class="w-3 h-3 rounded-full ml-2" style="background-color: #ef5675;"></span>ูุฒูู ฺฉู ูพุฑูฺู</li>
                    </ul>
                </div>
            </div>
             <div class="card text-center tooltip">
                <h3 class="text-lg font-bold" style="color:#bc5090;">ุงูฺฉุงูโุณูุฌ ูู ู ุชูุงู ุงุฌุฑุง</h3>
                <p id="technical-card-value" class="text-4xl font-extrabold my-2" style="color:#bc5090;"></p>
                <p class="text-xs text-slate-500">ุฑุนุงุช ุงุตูู ูููุฏุณ ู ูพุดโูุงุฒ</p>
                <div class="tooltiptext">
                     <p class="mb-3">ุญุงุชโุชุฑู ุจูุนุฏ ูู ฺฉู ูพุฑูฺูโูุง ุฑุง ุจุฑ ุงุณุงุณ <strong style="color:#bc5090;">ุชุฑุชุจ ุตุญุญ ูููุฏุณ (ูพุดโูุงุฒ)</strong> ุงูููุชโุจูุฏ ูโฺฉูุฏ. ุงุฌุฑุง ุชุฃุณุณุงุช ุฒุฑุฒูู (ุขุจุ ุจุฑู) ุจุงุฏ ูพุด ุงุฒ ุนููุงุช ุฑูุณุงุฒ (ุฑุงูโุณุงุฒ) ุงูุฌุงู ุดูุฏ ุชุง ุงุฒ <strong style="color:#bc5090;">ุชุฎุฑุจุ ุฏูุจุงุฑูโฺฉุงุฑ ู ุงุชูุงู ูุฒูู</strong> ุฌููฺฏุฑ ุดูุฏ.</p>
                      <h4 class="font-bold text-sm mb-2 border-t border-slate-300 pt-2">ุฒุฑุดุงุฎุต ฺฉูุฏ:</h4>
                    <ul class="text-sm list-none p-0">
                        <li class="flex items-center"><span class="w-3 h-3 rounded-full ml-2" style="background-color: #bc5090;"></span>ุชูุงู ููุทู ู ูพุดโูุงุฒ</li>
                    </ul>
                </div>
            </div>
             <div class="card text-center tooltip">
                <h3 class="text-lg font-bold" style="color:#ffa600;">ูพุงุฏุงุฑ ู ููุงุญุธุงุช ูุญุท</h3>
                <p id="environmental-card-value" class="text-4xl font-extrabold my-2" style="color:#ffa600;"></p>
                <p class="text-xs text-slate-500">ุญูุงุธุช ุงุฒ ููุงุจุน ู ฺฉุงูุด ุขููุฏฺฏ</p>
                 <div class="tooltiptext">
                    <p class="mb-3">ุงู ุจูุนุฏุ ููุณู ูพุฑูฺู ุจุง <strong style="color:#ffa600;">ุงุตูู ุชูุณุนู ูพุงุฏุงุฑ</strong> ุฑุง ุงุฑุฒุงุจ ูโฺฉูุฏ. ูพุฑูฺูโูุง ูุงููุฏ ุดุจฺฉู ูุงุถูุงุจ ฺฉู ุจู <strong style="color:#ffa600;">ุญูุงุธุช ุงุฒ ููุงุจุน ุขุจ ู ุฎุงฺฉ</strong> ููุทูู ฺฉูฺฉ ฺฉุฑุฏู ู ุงุฒ <strong style="color:#ffa600;">ุขููุฏฺฏโูุง ุฒุณุชโูุญุท</strong> ุฌููฺฏุฑ ูโฺฉููุฏุ ุงูุชุงุฒ ูฺูโุง ฺฉุณุจ ูโฺฉููุฏ.</p>
                    <h4 class="font-bold text-sm mb-2 border-t border-slate-300 pt-2">ุฒุฑุดุงุฎุต ฺฉูุฏ:</h4>
                    <ul class="text-sm list-none p-0">
                        <li class="flex items-center"><span class="w-3 h-3 rounded-full ml-2" style="background-color: #ffa600;"></span>ฺฉุงูุด ุงุซุฑุงุช ููู ุฒุณุชโูุญุท</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card mb-6" id="control-panel-card">
            <div id="control-panel-header" class="flex justify-between items-center cursor-pointer">
                <div class="flex items-center">
                    <h2 class="text-xl font-bold text-slate-800">ฺฉูุชุฑู ูพูู ูุฒูโุฏู ุดุงุฎุต ูุง ุงุตู</h2>
                    <svg id="control-panel-arrow" class="w-6 h-6 mr-3 text-slate-500 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                       <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                </div>
                <button id="reset-weights" class="reset-btn">ุจุงุฒูุดุงู</button>
            </div>
            <div id="control-panel-body" class="overflow-hidden transition-all duration-500 ease-in-out">
                <div class="border-t pt-4 mt-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 pt-2">
                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <label for="social-weight" class="font-bold text-slate-700">ุถุฑูุฑุช ู ุชุฃุซุฑ ุงุฌุชูุงุน</label>
                                <span id="social-weight-value" class="font-bold text-lg" style="color:#7a5195;"></span>
                            </div>
                            <input type="range" id="social-weight" min="0" max="100" class="slider" style="--thumb-color:#7a5195;">
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <label for="economic-weight" class="font-bold text-slate-700">ุชูุฌู ุงูุชุตุงุฏ ู ูุงู</label>
                                <span id="economic-weight-value" class="font-bold text-lg" style="color:#ef5675;"></span>
                            </div>
                            <input type="range" id="economic-weight" min="0" max="100" class="slider" style="--thumb-color:#ef5675;">
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <label for="technical-weight" class="font-bold text-slate-700">ุงูฺฉุงูโุณูุฌ ูู ู ุชูุงู ุงุฌุฑุง</label>
                                <span id="technical-weight-value" class="font-bold text-lg" style="color:#bc5090;"></span>
                            </div>
                            <input type="range" id="technical-weight" min="0" max="100" class="slider" style="--thumb-color:#bc5090;">
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <label for="environmental-weight" class="font-bold text-slate-700">ูพุงุฏุงุฑ ู ููุงุญุธุงุช ูุญุท</label>
                                <span id="environmental-weight-value" class="font-bold text-lg" style="color:#ffa600;"></span>
                            </div>
                            <input type="range" id="environmental-weight" min="0" max="100" class="slider" style="--thumb-color:#ffa600;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="scenario-card" class="card mb-6">
            <div class="flex items-center mb-3">
                <span id="scenario-icon" class="text-3xl ml-3"></span>
                <h2 id="scenario-title" class="text-xl font-bold"></h2>
            </div>
            <div id="scenario-content">
                <!-- Dynamic content will go here -->
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
            <div class="lg:col-span-5 card">
                <h3 class="text-xl font-bold text-center mb-4 text-slate-700">ุฑุชุจูโุจูุฏ ุชุฌูุน ุจุฑ ุงุณุงุณ ููุน ุฒุฑุณุงุฎุช</h3>
                <div class="relative h-[300px]">
                     <canvas id="projectTypeChart"></canvas>
                 </div>
            </div>
            
            <div class="lg:col-span-2 flex flex-col gap-6">
                <div class="card">
                     <h3 class="text-xl font-bold text-center mb-4 text-slate-700">ฑฐ ูพุฑูฺู ุจุง ุจุงูุงุชุฑู ุงูููุช</h3>
                     <div class="relative h-[450px]">
                         <canvas id="topProjectsChart"></canvas>
                     </div>
                </div>
                <div class="card">
                     <h3 class="text-xl font-bold text-center mb-4 text-slate-700">ุฑุชุจูโุจูุฏ ุชุฌูุน ุจุฑ ุงุณุงุณ ูุญูู</h3>
                     <div class="relative h-[450px]">
                         <canvas id="neighborhoodRankChart"></canvas>
                     </div>
                </div>
            </div>

            <div class="lg:col-span-3 card">
                <h3 class="text-xl font-bold text-center mb-2 text-slate-700">ูุงุชุฑุณ ุงูููุช ูพุฑูฺูโูุง</h3>
                <p class="text-center text-slate-500 text-sm mb-4">ุงู ูุงุชุฑุณ ุฑุชุจู ูุฑ ูพุฑูฺู ุฑุง ุฏุฑ ุชูุงุทุน ููุน ุฒุฑุณุงุฎุช ู ูุญูู ููุงุด ูโุฏูุฏ. ุฑูฺฏ ุขุจ ููุงุงูฺฏุฑ ุจุงูุงุชุฑู ุงูููุช (ุฑุชุจู ฑ) ู ุฑูฺฏ ูุฑูุฒ ููุงุงูฺฏุฑ ูพุงูโุชุฑู ุงูููุช (ุฑุชุจู ดฐ) ุงุณุช. ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ู ุชูุฌู ุฑุชุจูุ ูุงูุณ ุฑุง ุฑู ูุฑ ุณููู ูฺฏู ุฏุงุฑุฏ.</p>
                <div id="priority-matrix" class="grid grid-cols-6 gap-2 text-xs text-center p-2 bg-slate-50 rounded-lg">
                </div>
                 <div id="matrix-analysis" class="mt-4 pt-4 border-t border-slate-200 text-sm text-slate-600 leading-relaxed text-justify">
                    ุงู ุฑุชุจูโุจูุฏุ ุจุด ุงุฒ ฺฉ ููุฑุณุช ุณุงุฏูุ ฺฉ ููุดู ุฑุงู ููุดููุฏ ู ุฏููุฑุญููโุง ุจุฑุง ุชูุณุนู ุดูุฑฺฉ ููฺฉโุขุจุฑูุฏ ุงุณุช. ุฏุฑ ูุงุฒ ุงููุ ุงุณุชุฑุงุชฺ ุจุฑ 
                    <span class="font-bold text-blue-600">ุญุฏุงฺฉุซุฑุณุงุฒ ฺฉุงุฑุง ู ฺฉุณุจ ุฏุณุชุงูุฑุฏูุง ุณุฑุน</span> ูุชูุฑฺฉุฒ ุงุณุชุ ุจุง ุงุฌุฑุง ูพุฑูฺูโูุง ฺฉูโูุฒูู ู ุญุงุช ุขุจ ู ุจุฑู ุฏุฑ ูุญูุงุช ูพุฑุฌูุนุชุ ูุฏุฑุช ุจุง ฺฉูุชุฑู ุณุฑูุงูโฺฏุฐุงุฑุ ุจุดุชุฑู ุจุงุฒุฏู ุงูุชุตุงุฏ ู ุฑุถุงุช ุงุฌุชูุงุน ุฑุง ุชุถูู ูโฺฉูุฏ ู ุจู ุณุฑุนุช ุซุจุงุช ุฑุง ุจู ุจุฎุด ุจุฒุฑฺฏ ุงุฒ ุดูุฑฺฉ ูุฏู ูโุฏูุฏ. ูพุณ ุงุฒ ุชุซุจุช ุงู ููููุชโูุงุ ุงุณุชุฑุงุชฺ ุจุง ฺฉ ฺุฑุฎุด ููุดููุฏุงูู ูุงุฑุฏ ูุงุฒ ุฏููุ ุนู 
                    <span class="font-bold text-green-600">ุฑูุน ูุญุฑููุช ู ุชูุงูููุฏุณุงุฒ</span> ูโุดูุฏุ ุฏุฑ ุงู ูุฑุญููุ ููุงุจุน ุจู ุณูุช ูพุฑูฺูโูุง ุถุฑูุฑ ุงูุง ูพุฑูุฒููโุชุฑ ุฏุฑ ููุงุทู ฺฉูุชุฑ ุชูุณุนูโุงูุชู ูุฏุงุช ูโุดููุฏ ุชุง ุถูู ุงุตูุงุญ ุนุฏู ุชูุงุฒูโูุง ฺฏุฐุดุชูุ ูพุชุงูุณู ุฑุดุฏ ุขุช ฺฉู ุดูุฑฺฉ ุขุฒุงุฏ ฺฏุฑุฏุฏ. ุงู ุฑูฺฉุฑุฏ ุฏุงุฏูโูุญูุฑุ ฺฉ ุชุฎุตุต ุณุฑูุงู ูุงฺฉูุด ุฑุง ุจู ฺฉ ุจุฑูุงูู ุณุฑูุงูโฺฏุฐุงุฑ ูพุดโูุนุงู ู ุงุณุชุฑุงุชฺฺฉ ุชุจุฏู ูโฺฉูุฏ ฺฉู ุงุจุชุฏุง ุจุง ูุฏุฑุช ุจุฑ ุฑู ููุงุท ููุช ุชูุฑฺฉุฒ ฺฉุฑุฏู ู ุณูพุณ ุจู ุตูุฑุช ูุธุงูโููุฏ ุจู ุฑูุน ุถุนูโูุง ูโูพุฑุฏุงุฒุฏ ุชุง ุชูุณุนูโุง ูพุงุฏุงุฑ ู ูุชูุงุฒู ุฑุง ุชุถูู ููุงุฏ.
                </div>
            </div>
        </div>
        
        <div class="card mt-6">
            <h2 class="text-2xl font-bold text-center text-slate-700 mb-6">ุจุฑูุงูู ุฒูุงูโุจูุฏ ุงุณุชุฑุงุชฺฺฉ ต ุณุงูู (ุจุฑูุฒุฑุณุงู ููุง)</h2>
            <p id="timeline-intro" class="text-center text-slate-500 text-sm mb-8 max-w-3xl mx-auto">
                ุงู ููุดู ุฑุงูุ ุฎุฑูุฌ ฺฉู ู ุฑุชุจูโุจูุฏ ุดุฏู ูุงุชุฑุณ ุชุญูู AHP-TOPSIS ุฑุง ุจู ฺฉ ุจุฑูุงูู ุงุฌุฑุง ู ุนููุงุช ุฏุฑ ุงูู ต ุณุงูู ุชุจุฏู ูโฺฉูุฏ. ููุทู ุญุงฺฉู ุจุฑ ุงู ุฒูุงูโุจูุฏุ ุงุฌุฑุง ูพุฑูฺูโูุง ุจุฑ ุงุณุงุณ ุงูููุช ูู ู ุถุฑูุฑุช ุฑุงูุจุฑุฏ ุงุณุช ฺฉู ุฏุฑ ุชุญูู ุงููู ุจู ุงุซุจุงุช ุฑุณุฏู ุงุณุช.
            </p>
        
            <div id="timeline-container">
                <!-- DYNAMIC TIMELINE CONTENT WILL BE INSERTED HERE BY SCRIPT -->
            </div>
        
            <!-- Summary Table -->
            <div class="mt-8">
                <h3 class="text-xl font-bold text-center text-slate-700 mb-4">ุฌุฏูู ุฎูุงุตู ุฒูุงูโุจูุฏ ููุง</h3>
                <div class="overflow-x-auto">
                    <table id="timeline-summary-table" class="min-w-full bg-white rounded-lg shadow">
                        <thead class="bg-slate-800 text-white">
                            <tr>
                                <th class="text-right p-3 font-semibold">ูุงุฒ</th>
                                <th class="text-right p-3 font-semibold">ุณุงู ุงุฌุฑุง</th>
                                <th class="text-right p-3 font-semibold">ูุฏู ุงุณุชุฑุงุชฺฺฉ</th>
                                <th class="text-right p-3 font-semibold">ูพุฑูฺูโูุง ฺฉูุฏ</th>
                            </tr>
                        </thead>
                        <tbody class="text-slate-700">
                           <!-- DYNAMIC SUMMARY ROWS WILL BE INSERTED HERE BY SCRIPT -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-white text-center p-4 mt-8 border-t">
        <p class="text-slate-600">ุชูู ุดุฏู ุชูุณุท 
            <span class="tooltip font-bold text-slate-700">ูููุฏุณู ูุดุงูุฑ ุงุฏู ูพุฑุฏุงุฒ ูุญุท
                <span class="tooltiptext !w-auto !min-w-[220px] !-ml-[110px] !bg-[#1e293b] !text-white !text-xs !leading-relaxed">
                    ุชุญูู ู ุทุฑุงุญ: ุญูุฏุฑุถุง ุชุฑุงุจ
                    <br>
                    <span class="opacity-80">hr.torabii@gmail.com</span>
                </span>
            </span>
             - ุดูุฑูุฑ ูุงู 1404
        </p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            Chart.defaults.font.family = "'Vazirmatn', sans-serif";

            // --- Data Structures ---
            const criteriaInfo = {
                crit_lack:        { positive: true }, crit_pop: { positive: true }, crit_health: { positive: true },
                crit_cost_per_hh: { positive: false }, crit_cost_total: { positive: false }, crit_sequence: { positive: true },
                crit_env:         { positive: true }
            };

            const baseWeights = { 
                crit_lack: 0.125, crit_pop: 0.094, crit_health: 0.031, crit_cost_per_hh: 0.175,
                crit_cost_total: 0.125, crit_sequence: 0.350, crit_env: 0.100
            };

            const decisionMatrix = [
                {id: 'P11', project: 'ุขุจุฑุณุงู',   neighborhood: 1, crit_lack: 0.14, crit_pop: 175,  crit_health: 4, crit_cost_per_hh: 1264.2,  crit_cost_total: 67,   crit_sequence: 5, crit_env: 3},
                {id: 'P12', project: 'ุจุฑูโุฑุณุงู', neighborhood: 1, crit_lack: 0.08, crit_pop: 175,  crit_health: 4, crit_cost_per_hh: 1018.9,  crit_cost_total: 54,   crit_sequence: 4, crit_env: 3},
                {id: 'P13', project: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 1, crit_lack: 0.17, crit_pop: 175,  crit_health: 3, crit_cost_per_hh: 2094.3,  crit_cost_total: 111,  crit_sequence: 3, crit_env: 3},
                {id: 'P14', project: 'ูุงุถูุงุจ',     neighborhood: 1, crit_lack: 1.00, crit_pop: 175,  crit_health: 5, crit_cost_per_hh: 18603.8, crit_cost_total: 986,  crit_sequence: 2, crit_env: 5},
                {id: 'P15', project: 'ุฑุงูโุณุงุฒ',   neighborhood: 1, crit_lack: 0.20, crit_pop: 175,  crit_health: 2, crit_cost_per_hh: 10245.3, crit_cost_total: 543,  crit_sequence: 1, crit_env: 2},
                {id: 'P21', project: 'ุขุจุฑุณุงู',   neighborhood: 2, crit_lack: 0.07, crit_pop: 4679, crit_health: 4, crit_cost_per_hh: 25.4,    crit_cost_total: 36,   crit_sequence: 5, crit_env: 3},
                {id: 'P22', project: 'ุจุฑูโุฑุณุงู', neighborhood: 2, crit_lack: 0.02, crit_pop: 4679, crit_health: 4, crit_cost_per_hh: 9.2,     crit_cost_total: 13,   crit_sequence: 4, crit_env: 3},
                {id: 'P23', project: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 2, crit_lack: 0.10, crit_pop: 4679, crit_health: 3, crit_cost_per_hh: 56.4,    crit_cost_total: 80,   crit_sequence: 3, crit_env: 3},
                {id: 'P24', project: 'ูุงุถูุงุจ',     neighborhood: 2, crit_lack: 1.00, crit_pop: 4679, crit_health: 5, crit_cost_per_hh: 810.3,   crit_cost_total: 1149, crit_sequence: 2, crit_env: 5},
                {id: 'P25', project: 'ุฑุงูโุณุงุฒ',   neighborhood: 2, crit_lack: 0.10, crit_pop: 4679, crit_health: 2, crit_cost_per_hh: 226.4,   crit_cost_total: 321,  crit_sequence: 1, crit_env: 2},
                {id: 'P31', project: 'ุขุจุฑุณุงู',   neighborhood: 3, crit_lack: 0.07, crit_pop: 3231, crit_health: 4, crit_cost_per_hh: 24.5,    crit_cost_total: 24,   crit_sequence: 5, crit_env: 3},
                {id: 'P32', project: 'ุจุฑูโุฑุณุงู', neighborhood: 3, crit_lack: 0.09, crit_pop: 3231, crit_health: 4, crit_cost_per_hh: 43.9,    crit_cost_total: 43,   crit_sequence: 4, crit_env: 3},
                {id: 'P33', project: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 3, crit_lack: 0.06, crit_pop: 3231, crit_health: 3, crit_cost_per_hh: 29.6,    crit_cost_total: 29,   crit_sequence: 3, crit_env: 3},
                {id: 'P34', project: 'ูุงุถูุงุจ',     neighborhood: 3, crit_lack: 1.00, crit_pop: 3231, crit_health: 5, crit_cost_per_hh: 715.0,   crit_cost_total: 700,  crit_sequence: 2, crit_env: 5},
                {id: 'P35', project: 'ุฑุงูโุณุงุฒ',   neighborhood: 3, crit_lack: 0.10, crit_pop: 3231, crit_health: 2, crit_cost_per_hh: 199.2,   crit_cost_total: 195,  crit_sequence: 1, crit_env: 2},
                {id: 'P41', project: 'ุขุจุฑุณุงู',   neighborhood: 4, crit_lack: 0.28, crit_pop: 350,  crit_health: 4, crit_cost_per_hh: 1500.0,  crit_cost_total: 159,  crit_sequence: 5, crit_env: 3},
                {id: 'P42', project: 'ุจุฑูโุฑุณุงู', neighborhood: 4, crit_lack: 0.27, crit_pop: 350,  crit_health: 4, crit_cost_per_hh: 1971.7,  crit_cost_total: 209,  crit_sequence: 4, crit_env: 3},
                {id: 'P43', project: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 4, crit_lack: 0.17, crit_pop: 350,  crit_health: 3, crit_cost_per_hh: 1264.2,  crit_cost_total: 134,  crit_sequence: 3, crit_env: 3},
                {id: 'P44', project: 'ูุงุถูุงุจ',     neighborhood: 4, crit_lack: 1.00, crit_pop: 350,  crit_health: 5, crit_cost_per_hh: 11169.8, crit_cost_total: 1184, crit_sequence: 2, crit_env: 5},
                {id: 'P45', project: 'ุฑุงูโุณุงุฒ',   neighborhood: 4, crit_lack: 0.26, crit_pop: 350,  crit_health: 2, crit_cost_per_hh: 7717.0,  crit_cost_total: 818,  crit_sequence: 1, crit_env: 2},
                {id: 'P51', project: 'ุขุจุฑุณุงู',   neighborhood: 5, crit_lack: 0.01, crit_pop: 2798, crit_health: 4, crit_cost_per_hh: 3.5,     crit_cost_total: 3,    crit_sequence: 5, crit_env: 3},
                {id: 'P52', project: 'ุจุฑูโุฑุณุงู', neighborhood: 5, crit_lack: 0.01, crit_pop: 2798, crit_health: 4, crit_cost_per_hh: 4.7,     crit_cost_total: 4,    crit_sequence: 4, crit_env: 3},
                {id: 'P53', project: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 5, crit_lack: 0.01, crit_pop: 2798, crit_health: 3, crit_cost_per_hh: 4.7,     crit_cost_total: 4,    crit_sequence: 3, crit_env: 3},
                {id: 'P54', project: 'ูุงุถูุงุจ',     neighborhood: 5, crit_lack: 1.00, crit_pop: 2798, crit_health: 5, crit_cost_per_hh: 537.7,   crit_cost_total: 456,  crit_sequence: 2, crit_env: 5},
                {id: 'P55', project: 'ุฑุงูโุณุงุฒ',   neighborhood: 5, crit_lack: 0.03, crit_pop: 2798, crit_health: 2, crit_cost_per_hh: 46.0,    crit_cost_total: 39,   crit_sequence: 1, crit_env: 2},
                {id: 'P61', project: 'ุขุจุฑุณุงู',   neighborhood: 6, crit_lack: 0.15, crit_pop: 1086, crit_health: 4, crit_cost_per_hh: 103.3,   crit_cost_total: 34,   crit_sequence: 5, crit_env: 3},
                {id: 'P62', project: 'ุจุฑูโุฑุณุงู', neighborhood: 6, crit_lack: 0.11, crit_pop: 1086, crit_health: 4, crit_cost_per_hh: 109.4,   crit_cost_total: 36,   crit_sequence: 4, crit_env: 3},
                {id: 'P63', project: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 6, crit_lack: 0.11, crit_pop: 1086, crit_health: 3, crit_cost_per_hh: 115.5,   crit_cost_total: 38,   crit_sequence: 3, crit_env: 3},
                {id: 'P64', project: 'ูุงุถูุงุจ',     neighborhood: 6, crit_lack: 1.00, crit_pop: 1086, crit_health: 5, crit_cost_per_hh: 1519.8,  crit_cost_total: 500,  crit_sequence: 2, crit_env: 5},
                {id: 'P65', project: 'ุฑุงูโุณุงุฒ',   neighborhood: 6, crit_lack: 0.22, crit_pop: 1086, crit_health: 2, crit_cost_per_hh: 887.5,   crit_cost_total: 292,  crit_sequence: 1, crit_env: 2},
                {id: 'P71', project: 'ุขุจุฑุณุงู',   neighborhood: 7, crit_lack: 0.47, crit_pop: 86,   crit_health: 4, crit_cost_per_hh: 6423.1,  crit_cost_total: 167,  crit_sequence: 5, crit_env: 3},
                {id: 'P72', project: 'ุจุฑูโุฑุณุงู', neighborhood: 7, crit_lack: 0.51, crit_pop: 86,   crit_health: 4, crit_cost_per_hh: 9769.2,  crit_cost_total: 254,  crit_sequence: 4, crit_env: 3},
                {id: 'P73', project: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 7, crit_lack: 0.57, crit_pop: 86,   crit_health: 3, crit_cost_per_hh: 10846.2, crit_cost_total: 282,  crit_sequence: 3, crit_env: 3},
                {id: 'P74', project: 'ูุงุถูุงุจ',     neighborhood: 7, crit_lack: 1.00, crit_pop: 86,   crit_health: 5, crit_cost_per_hh: 28961.5, crit_cost_total: 753,  crit_sequence: 2, crit_env: 5},
                {id: 'P75', project: 'ุฑุงูโุณุงุฒ',   neighborhood: 7, crit_lack: 0.43, crit_pop: 86,   crit_health: 2, crit_cost_per_hh: 33269.2, crit_cost_total: 865,  crit_sequence: 1, crit_env: 2},
                {id: 'P81', project: 'ุขุจุฑุณุงู',   neighborhood: 8, crit_lack: 0.36, crit_pop: 360,  crit_health: 4, crit_cost_per_hh: 1743.1,  crit_cost_total: 190,  crit_sequence: 5, crit_env: 3},
                {id: 'P82', project: 'ุจุฑูโุฑุณุงู', neighborhood: 8, crit_lack: 0.56, crit_pop: 360,  crit_health: 4, crit_cost_per_hh: 3834.9,  crit_cost_total: 418,  crit_sequence: 4, crit_env: 3},
                {id: 'P83', project: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 8, crit_lack: 0.56, crit_pop: 360,  crit_health: 3, crit_cost_per_hh: 3834.9,  crit_cost_total: 418,  crit_sequence: 3, crit_env: 3},
                {id: 'P84', project: 'ูุงุถูุงุจ',     neighborhood: 8, crit_lack: 1.00, crit_pop: 360,  crit_health: 5, crit_cost_per_hh: 10385.3, crit_cost_total: 1132, crit_sequence: 2, crit_env: 5},
                {id: 'P85', project: 'ุฑุงูโุณุงุฒ',   neighborhood: 8, crit_lack: 0.54, crit_pop: 360,  crit_health: 2, crit_cost_per_hh: 14972.5, crit_cost_total: 1632, crit_sequence: 1, crit_env: 2}
            ];

            const baselineRankings = [
                { id: 'P51', name: 'ุขุจุฑุณุงู',   neighborhood: 5, finalScore: 100 }, { id: 'P31', name: 'ุขุจุฑุณุงู',   neighborhood: 3, finalScore: 98 },
                { id: 'P21', name: 'ุขุจุฑุณุงู',   neighborhood: 2, finalScore: 97 }, { id: 'P22', name: 'ุจุฑูโุฑุณุงู', neighborhood: 2, finalScore: 95 },
                { id: 'P52', name: 'ุจุฑูโุฑุณุงู', neighborhood: 5, finalScore: 94 }, { id: 'P32', name: 'ุจุฑูโุฑุณุงู', neighborhood: 3, finalScore: 93 },
                { id: 'P61', name: 'ุขุจุฑุณุงู',   neighborhood: 6, finalScore: 91 }, { id: 'P62', name: 'ุจุฑูโุฑุณุงู', neighborhood: 6, finalScore: 90 },
                { id: 'P81', name: 'ุขุจุฑุณุงู',   neighborhood: 8, finalScore: 85 }, { id: 'P71', name: 'ุขุจุฑุณุงู',   neighborhood: 7, finalScore: 84 },
                { id: 'P82', name: 'ุจุฑูโุฑุณุงู', neighborhood: 8, finalScore: 82 }, { id: 'P41', name: 'ุขุจุฑุณุงู',   neighborhood: 4, finalScore: 81 },
                { id: 'P11', name: 'ุขุจุฑุณุงู',   neighborhood: 1, finalScore: 80 }, { id: 'P72', name: 'ุจุฑูโุฑุณุงู', neighborhood: 7, finalScore: 78 },
                { id: 'P42', name: 'ุจุฑูโุฑุณุงู', neighborhood: 4, finalScore: 76 }, { id: 'P12', name: 'ุจุฑูโุฑุณุงู', neighborhood: 1, finalScore: 75 },
                { id: 'P53', name: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 5, finalScore: 70 }, { id: 'P33', name: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 3, finalScore: 69 },
                { id: 'P23', name: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 2, finalScore: 68 }, { id: 'P63', name: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 6, finalScore: 65 },
                { id: 'P83', name: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 8, finalScore: 60 }, { id: 'P73', name: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 7, finalScore: 58 },
                { id: 'P43', name: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 4, finalScore: 56 }, { id: 'P13', name: 'ฺฏุงุฒุฑุณุงู',   neighborhood: 1, finalScore: 55 },
                { id: 'P54', name: 'ูุงุถูุงุจ',     neighborhood: 5, finalScore: 50 }, { id: 'P34', name: 'ูุงุถูุงุจ',     neighborhood: 3, finalScore: 49 },
                { id: 'P24', name: 'ูุงุถูุงุจ',     neighborhood: 2, finalScore: 48 }, { id: 'P64', name: 'ูุงุถูุงุจ',     neighborhood: 6, finalScore: 43 },
                { id: 'P84', name: 'ูุงุถูุงุจ',     neighborhood: 8, finalScore: 40 }, { id: 'P74', name: 'ูุงุถูุงุจ',     neighborhood: 7, finalScore: 38 },
                { id: 'P44', name: 'ูุงุถูุงุจ',     neighborhood: 4, finalScore: 36 }, { id: 'P14', name: 'ูุงุถูุงุจ',     neighborhood: 1, finalScore: 35 },
                { id: 'P55', name: 'ุฑุงูโุณุงุฒ',   neighborhood: 5, finalScore: 25 }, { id: 'P35', name: 'ุฑุงูโุณุงุฒ',   neighborhood: 3, finalScore: 23 },
                { id: 'P25', name: 'ุฑุงูโุณุงุฒ',   neighborhood: 2, finalScore: 22 }, { id: 'P65', name: 'ุฑุงูโุณุงุฒ',   neighborhood: 6, finalScore: 20 },
                { id: 'P15', name: 'ุฑุงูโุณุงุฒ',   neighborhood: 1, finalScore: 17 }, { id: 'P45', name: 'ุฑุงูโุณุงุฒ',   neighborhood: 4, finalScore: 15 },
                { id: 'P85', name: 'ุฑุงูโุณุงุฒ',   neighborhood: 8, finalScore: 12 }, { id: 'P75', name: 'ุฑุงูโุณุงุฒ',   neighborhood: 7, finalScore: 10 }
            ];

            const rankJustifications = {
                1: { level: '๐ฏ ุณุทุญ ฑ: ุฏุณุชุงูุฑุฏูุง ุณุฑุน', detail: '<strong>ุฑุชุจู ฑ: ุขุจุฑุณุงู ูุญูู ต:</strong> ุชุฑฺฉุจ ุจูููุ ุจุงูุงุชุฑู ุงูููุช ูู (ุงูุชุงุฒ ุชูุงู: ต) ุจุง ฺฉุงุฑุง ุงูุชุตุงุฏ ุงุณุชุซูุง (ูุฒูู/ุฎุงููุงุฑ: ููุท ณ.ต ูุงุญุฏ) ุจุฑุง ุญุฏุงฺฉุซุฑุณุงุฒ ุจุงุฒุฏู ุณุฑูุงู.' },
                2: { level: '๐ฏ ุณุทุญ ฑ: ุฏุณุชุงูุฑุฏูุง ุณุฑุน', detail: '<strong>ุฑุชุจู ฒ: ุขุจุฑุณุงู ูุญูู ณ:</strong> ููุงุณ ู ฺฉุงุฑุงุ ุงูููุช ูู ูุทูู (ุงูุชุงุฒ ุชูุงู: ต) ุจุฑุง ุฎุฏูุชโุฑุณุงู ุจู ุฌูุนุช ุจุณุงุฑ ุจุงูุง (ณฒณฑ ุฎุงููุงุฑ) ุจุง ูุฒููโุง ุจุณุงุฑ ูุงฺุฒ (ูุฒูู/ุฎุงููุงุฑ: ฒด.ต).' },
                3: { level: '๐ฏ ุณุทุญ ฑ: ุฏุณุชุงูุฑุฏูุง ุณุฑุน', detail: '<strong>ุฑุชุจู ณ: ุขุจุฑุณุงู ูุญูู ฒ:</strong> ุญุฏุงฺฉุซุฑ ุชุงุซุฑ ุงุฌุชูุงุนุ ุฎุฏูุชโุฑุณุงู ุจู ุจุฒุฑฺฏุชุฑู ุฌูุนุช ุดูุฑฺฉ (ดถทน ุฎุงููุงุฑ) ุจุง ฺฉ ูพุฑูฺู ุขุจุฑุณุงู ุถุฑูุฑ ู ุจุณุงุฑ ฺฉูโูุฒูู.' },
                4: { level: '๐ฏ ุณุทุญ ฑ: ุฏุณุชุงูุฑุฏูุง ุณุฑุน', detail: '<strong>ุฑุชุจู ด: ุจุฑูโุฑุณุงู ูุญูู ฒ:</strong> ุณุฑูุงูโฺฏุฐุงุฑ ููุดููุฏุ ุฏููู ุงูููุช ูู (ุงูุชุงุฒ ุชูุงู: ด) ุจุง ฺฉูุชุฑู ูุฒูู ูุทูู ุฏุฑ ูุงู ุชูุงู ูพุฑูฺูโูุง (ูุฒูู ฺฉู: ฑณ ูุงุญุฏ) ฺฉู ุจุงุฒุฏู ููุฑ ุฑุง ุชุถูู ูโฺฉูุฏ.' },
                5: { level: '๐ฏ ุณุทุญ ฑ: ุฏุณุชุงูุฑุฏูุง ุณุฑุน', detail: '<strong>ุฑุชุจู ต: ุจุฑูโุฑุณุงู ูุญูู ต:</strong> ฺฉุงุฑุง ูุทููุ ูุฒูู ุจุณุงุฑ ูุงฺุฒ ุจู ุงุฒุง ูุฑ ุฎุงููุงุฑ (ด.ท ูุงุญุฏ) ุจุฑุง ฺฉ ุฒุฑุณุงุฎุช ุญุงุชุ ุงู ูพุฑูฺู ุฑุง ุจู ฺฉ ุงูุชุฎุงุจ ุจุฏู ุจุฑุง ูุงุฒ ุงูู ุชุจุฏู ูโฺฉูุฏ.' },
                6: { level: '๐ฏ ุณุทุญ ฑ: ุฏุณุชุงูุฑุฏูุง ุณุฑุน', detail: '<strong>ุฑุชุจู ถ: ุจุฑูโุฑุณุงู ูุญูู ณ:</strong> ุชฺฉูู ุณุฑุนุ ฺฉ ูพุฑูฺู ุถุฑูุฑ ุจุฑู ุจุง ูุฒูู ูพุงู ุจุฑุง ุชฺฉูู ุฒุฑุณุงุฎุชโูุง ฺฉ ูุญูู ฺฉูุฏ ู ูพุฑุฌูุนุช.' },
                7: { level: '๐ฏ ุณุทุญ ฑ: ุฏุณุชุงูุฑุฏูุง ุณุฑุน', detail: '<strong>ุฑุชุจู ท: ุขุจุฑุณุงู ูุญูู ถ:</strong> ุงูููุช ูู ุบุงูุจุ ุจุง ูุฌูุฏ ูุฒูู ูุณุจุชุง ุจุงูุงุชุฑุ ุถุฑูุฑุช ูู ูุทูู ุขุจุฑุณุงู (ุงูุชุงุฒ ุชูุงู: ต) ุงู ูพุฑูฺู ุฑุง ุฏุฑ ุงู ุณุทุญ ูุฑุงุฑ ูโุฏูุฏ.' },
                8: { level: '๐ฏ ุณุทุญ ฑ: ุฏุณุชุงูุฑุฏูุง ุณุฑุน', detail: '<strong>ุฑุชุจู ธ: ุจุฑูโุฑุณุงู ูุญูู ถ:</strong> ุชูุงุฒู ููุทูุ ุขุฎุฑู ูพุฑูฺู ูุงุฒ ุฏุณุชุงูุฑุฏูุง ุณุฑุน ฺฉู ุชุนุงุฏู ุฎูุจ ุจู ุถุฑูุฑุช ููุ ุฌูุนุช ุชุญุช ูพูุดุด ู ูุฒูู ุจุฑูุฑุงุฑ ูโฺฉูุฏ.' },
                9: { level: 'โ๏ธ ุณุทุญ ฒ: ุฑูุน ูุญุฑููุช', detail: '<strong>ุฑุชุจู น: ุขุจุฑุณุงู ูุญูู ธ:</strong> ุณุฑูุงูโฺฏุฐุงุฑ ุฑุงูุจุฑุฏุ ุจุง ูุฌูุฏ ูุฒูู ุจุงูุง (ูุฒูู/ุฎุงููุงุฑ: ฑทดณ.ฑ)ุ ุงูููุช ูุทูู ูู (ุงูุชุงุฒ ุชูุงู: ต) ุจุฑุง ุฑูุน ูุญุฑููุช ุดุฏุฏ (ุดุงุฎุต ุฑูุน ฺฉูุจูุฏ: ฐ.ณถ) ู ูุนุงูโุณุงุฒ ุชูุณุนู.' },
                10: { level: 'โ๏ธ ุณุทุญ ฒ: ุฑูุน ูุญุฑููุช', detail: '<strong>ุฑุชุจู ฑฐ: ุขุจุฑุณุงู ูุญูู ท:</strong> ุฑูุน ุจุงูุงุชุฑู ฺฉูุจูุฏุ ุงู ูพุฑูฺู ุจุดุชุฑู ุดฺฉุงู ุฒุฑุณุงุฎุช ุขุจ ุฑุง ูพุฑ ูโฺฉูุฏ (ุดุงุฎุต ุฑูุน ฺฉูุจูุฏ: ฐ.ดท) ู ุจุง ูุฌูุฏ ุฌูุนุช ฺฉูุ ฺฉ ุถุฑูุฑุช ุงุณุชุฑุงุชฺฺฉ ุงุณุช.' },
                11: { level: 'โ๏ธ ุณุทุญ ฒ: ุฑูุน ูุญุฑููุช', detail: '<strong>ุฑุชุจู ฑฑ: ุจุฑูโุฑุณุงู ูุญูู ธ:</strong> ุชูุงูููุฏุณุงุฒ ุณุงุฎุชโูุณุงุฒุ ูพุณ ุงุฒ ุขุจุ ุจุฑู ุฒุฑุณุงุฎุช ฺฉูุฏ ุจุฑุง ุดุฑูุน ุณุงุฎุชโูุณุงุฒ ุฏุฑ ุงู ูุญูู ุงุณุช ฺฉู ุจุงูุงุชุฑู ฺฉูุจูุฏ ุจุฑู ุฑุง ุฏุงุฑุฏ (ุดุงุฎุต ุฑูุน ฺฉูุจูุฏ: ฐ.ตถ).' },
                12: { level: 'โ๏ธ ุณุทุญ ฒ: ุฑูุน ูุญุฑููุช', detail: '<strong>ุฑุชุจู ฑฒ: ุขุจุฑุณุงู ูุญูู ด:</strong> ุงูููุช ูุจุชู ุจุฑ ูุงุฒุ ุถุฑูุฑุช ูู ุขุจุฑุณุงูุ ูุฒูู ุจุงูุง ุงู ูพุฑูฺู ุฑุง ุจุฑุง ุฑูุน ฺฉูุจูุฏูุง ฺฉ ูุญูู ฺฉูโุฌูุนุช ุชูุฌู ูโฺฉูุฏ.' },
                13: { level: 'โ๏ธ ุณุทุญ ฒ: ุฑูุน ูุญุฑููุช', detail: '<strong>ุฑุชุจู ฑณ: ุขุจุฑุณุงู ูุญูู ฑ:</strong> ุชฺฉูู ูุชูุงุฒูุ ุงุฌุฑุง ูพุฑูฺู ุขุจ ุจุฑุง ฺฉ ุงุฒ ฺฉูโุฌูุนุชโุชุฑู ูุญูุงุช ุฌูุช ุงุทููุงู ุงุฒ ุชูุฒุน ุนุงุฏูุงูู ุฒุฑุณุงุฎุชโูุง ุญุงุช.' },
                14: { level: 'โ๏ธ ุณุทุญ ฒ: ุฑูุน ูุญุฑููุช', detail: '<strong>ุฑุชุจู ฑด: ุจุฑูโุฑุณุงู ูุญูู ท:</strong> ูพุงุณุฎ ุจู ูุงุฒ ููุฑุ ุฑูุน ฺฉูุจูุฏ ุดุฏุฏ ุจุฑู (ุดุงุฎุต ุฑูุน ฺฉูุจูุฏ: ฐ.ตฑ) ุฏุฑ ฺฉูุงุฑ ูุญูู ธุ ุจุฑุง ฺฉูพุงุฑฺูโุณุงุฒ ุชูุณุนู ุถุฑูุฑ ุงุณุช.' },
                15: { level: 'โ๏ธ ุณุทุญ ฒ: ุฑูุน ูุญุฑููุช', detail: '<strong>ุฑุชุจู ฑต: ุจุฑูโุฑุณุงู ูุญูู ด:</strong> ุงูุฏุงู ุถุฑูุฑุ ุจุง ูุฌูุฏ ูุฒูู ุจุงูุงุ ุถุฑูุฑุช ูู ุจุฑู ุงู ูพุฑูฺู ุฑุง ุจุฑุง ุชฺฉูู ุฒุฑุณุงุฎุชโูุง ุญุงุช ูุญูู ด ุฏุฑ ุงูููุช ูุฑุงุฑ ูโุฏูุฏ.' },
                16: { level: 'โ๏ธ ุณุทุญ ฒ: ุฑูุน ูุญุฑููุช', detail: '<strong>ุฑุชุจู ฑถ: ุจุฑูโุฑุณุงู ูุญูู ฑ:</strong> ุชฺฉูู ููุง ูุงุฒ ุญุงุชุ ุขุฎุฑู ูพุฑูฺู ุงุฒ ูุฌููุนู ูพุฑูฺูโูุง ุขุจ ู ุจุฑู ฺฉู ุดุจฺฉู ุญุงุช ฺฉู ุดูุฑฺฉ ุฑุง ุชฺฉูู ูโฺฉูุฏ.' },
                17: { level: 'โจ ุณุทุญ ณ: ฺฏุณุชุฑุด ุฑูุงู', detail: '<strong>ุฑุชุจู ฑท: ฺฏุงุฒุฑุณุงู ูุญูู ต:</strong> ๐ก ุจุงุฒุฏู ุญุฏุงฺฉุซุฑ ุฑูุงู: ุงู ูพุฑูฺู ุจุง ูุฌูุฏ ุงูููุช ูู ูพุงูโุชุฑ (ุงูุชุงุฒ ุชูุงู: ณ)ุ ุจู ุฏูู ฺฉุงุฑุง ุงูุชุตุงุฏ ุงุณุชุซูุง (ูุฒูู/ุฎุงููุงุฑ: ููุท ด.ท ูุงุญุฏ)ุ ุจู ุนููุงู ููุดููุฏุงููโุชุฑู ููุทู ุดุฑูุน ุจุฑุง ฺฏุณุชุฑุด ุดุจฺฉู ฺฏุงุฒ ุงูุชุฎุงุจ ุดุฏู ุงุณุช.' },
                18: { level: 'โจ ุณุทุญ ณ: ฺฏุณุชุฑุด ุฑูุงู', detail: '<strong>ุฑุชุจู ฑธ: ฺฏุงุฒุฑุณุงู ูุญูู ณ:</strong> ๐ก ฺฏุณุชุฑุด ฺฉุงุฑุขูุฏ: ุงู ูพุฑูฺู ุชูุฑุจุงู ููุงู ูุฏู ุงูุชุตุงุฏ ูููู ูุญูู ต ุฑุง ุฏุฑ ฺฉ ูุฑฺฉุฒ ุฌูุนุช ฺฉูุฏ ุฏฺฏุฑ (ณฒณฑ ุฎุงููุงุฑ) ุชฺฉุฑุงุฑ ูโฺฉูุฏ ู ุจุงุฒุฏู ุณุฑุน ุณุฑูุงู ุฏุฑ ุจุฎุด ุฑูุงู ุฑุง ุชุถูู ูโููุงุฏ.' },
                19: { level: 'โจ ุณุทุญ ณ: ฺฏุณุชุฑุด ุฑูุงู', detail: '<strong>ุฑุชุจู ฑน: ฺฏุงุฒุฑุณุงู ูุญูู ฒ:</strong> ๐ก ุชุฃุซุฑ ุงุฌุชูุงุน ฺฏุณุชุฑุฏู: ุชูุฑฺฉุฒ ุจุฑ ุจุฒุฑฺฏุชุฑู ุฌูุนุช ุดูุฑฺฉ (ดถทน ุฎุงููุงุฑ)ุ ุงู ูพุฑูฺู ุฑุง ุจู ฺฉ ุณุฑูุงูโฺฏุฐุงุฑ ุจุง ุญุฏุงฺฉุซุฑ ูููุฐ ุงุฌุชูุงุน ุชุจุฏู ูโฺฉูุฏ ฺฉู ุณุทุญ ุฑูุงู ุจุฎุด ุจุฒุฑฺฏ ุงุฒ ุณุงฺฉูุงู ุฑุง ุงุฑุชูุง ูโุฏูุฏ.' },
                20: { level: 'โจ ุณุทุญ ณ: ฺฏุณุชุฑุด ุฑูุงู', detail: '<strong>ุฑุชุจู ฒฐ: ฺฏุงุฒุฑุณุงู ูุญูู ถ:</strong> ๐ก ุชฺฉูู ุญููู ุงูููุช: ุงู ูพุฑูฺูุ ุขุฎุฑู ุญููู ุงุฒ ุฒูุฌุฑู ูพุฑูฺูโูุง ฺฏุงุฒุฑุณุงู ุจุณุงุฑ ฺฉุงุฑุขูุฏ ุงุณุช ฺฉู ุดุจฺฉู ุฑุง ุฏุฑ ุชูุงู ูุญูุงุช ุชูุณุนูโุงูุชู ุชฺฉูู ฺฉุฑุฏู ู ุจุณุชุฑ ุฑุง ุจุฑุง ุญุฑฺฉุช ุจู ุณูุช ููุงุทู ูพุฑูุฒููโุชุฑ ุขูุงุฏู ูโฺฉูุฏ.' },
                21: { level: 'โจ ุณุทุญ ณ: ฺฏุณุชุฑุด ุฑูุงู', detail: '<strong>ุฑุชุจู ฒฑ: ฺฏุงุฒุฑุณุงู ูุญูู ธ:</strong> ๐ก ฺฏุงู ุฏุฑ ูุณุฑ ุนุฏุงูุช ุฑูุงู: ุงู ุฑุชุจูุ ููุทู ุนุทู ุงุณุชุฑุงุชฺฺฉ ุฏุฑ ูพุฑูฺูโูุง ฺฏุงุฒ ุงุณุช. ุงูููุช ุงุฒ ยซฺฉุงุฑุง ูุญุถยป ุจู ุณูุช ยซุฑูุน ูุงุฒยป ุฏุฑ ฺฉ ููุทูู ฺฉูุชุฑ ุชูุณุนูโุงูุชู ุชุบุฑ ูโฺฉูุฏุ ุนูโุฑุบู ูุฒูู ุจุงูุง ุขู ุจู ุงุฒุง ูุฑ ุฎุงููุงุฑ (ณธณด.น ูุงุญุฏ).' },
                22: { level: 'โจ ุณุทุญ ณ: ฺฏุณุชุฑุด ุฑูุงู', detail: '<strong>ุฑุชุจู ฒฒ: ฺฏุงุฒุฑุณุงู ูุญูู ท:</strong> ๐ก ูพุงุณุฎ ุจู ุจุงูุงุชุฑู ฺฉูุจูุฏ ฺฏุงุฒ: ุงู ูพุฑูฺู ุจู ุทูุฑ ูุณุชูู ุจู ุจุงูุงุชุฑู ุดุงุฎุต ุฑูุน ฺฉูุจูุฏ ฺฏุงุฒ (ฐ.ตท) ูพุงุณุฎ ูโุฏูุฏ ู ฺฉ ุงูุฏุงู ุถุฑูุฑ ุจุฑุง ุชุญูู ุชูุณุนู ูุชูุงุฒู ุฏุฑ ูุญุฑููโุชุฑู ูุญูู ุดูุฑฺฉ ุงุณุช.' },
                23: { level: 'โจ ุณุทุญ ณ: ฺฏุณุชุฑุด ุฑูุงู', detail: '<strong>ุฑุชุจู ฒณ: ฺฏุงุฒุฑุณุงู ูุญูู ด:</strong> ๐ก ุณุฑูุงูโฺฏุฐุงุฑ ุชูุงูููุฏุณุงุฒ: ุจุง ูุฌูุฏ ุฌูุนุช ฺฉูุ ุงุฌุฑุง ุงู ูพุฑูฺู ุจุฑุง ูุนุงูโุณุงุฒ ฺฉุงูู ูพุชุงูุณู ุณุงุฎุชโูุณุงุฒ ู ุณฺฉููุช ุฏุฑ ูุญูู ดุ ูพุณ ุงุฒ ุชุงูู ุขุจ ู ุจุฑูุ ฺฉ ฺฏุงู ููุทู ู ุถุฑูุฑ ุงุณุช.' },
                24: { level: 'โจ ุณุทุญ ณ: ฺฏุณุชุฑุด ุฑูุงู', detail: '<strong>ุฑุชุจู ฒด: ฺฏุงุฒุฑุณุงู ูุญูู ฑ:</strong> ๐ก ุชฺฉูู ฑฐฐูช ูพูุดุด: ุงู ูพุฑูฺู ุจู ุนููุงู ุขุฎุฑู ุงูุฏุงู ุฏุฑ ุจุฎุด ฺฏุงุฒุ ูพูุดุด ุงู ุฎุฏูุช ุฑูุงู ุฑุง ุฏุฑ ฺฉู ุดูุฑฺฉ ุจู ุตุฏุฏุฑุตุฏ ูโุฑุณุงูุฏ ู ูพุฑููุฏู ุฒุฑุณุงุฎุชโูุง ุงูุฑฺ ุฑุง ุจู ุทูุฑ ฺฉุงูู ูโุจูุฏุฏ.' },
                25: { level: '๐ฑ ุณุทุญ ด: ูพุงุฏุงุฑ ุฒุณุชโูุญุท', detail: '<strong>ุฑุชุจู ฒต: ูุงุถูุงุจ ูุญูู ต:</strong> ๐ก ูพุดฺฏุงู ุณูุงูุช: ุงุฌุฑุง ูพุฑูฺู ูุงุถูุงุจ ุฏุฑ ูุญูู ต ุจู ุฏูู ฺฉุงุฑุง ุงูุชุตุงุฏ ูุณุจุชุงู ุจูุชุฑ (ูุฒูู/ุฎุงููุงุฑ: ตณท.ท) ู ุฌูุนุช ุจุงูุงุ ููุดููุฏุงููโุชุฑู ููุทู ุจุฑุง ุดุฑูุน ุงู ูุงุฒ ู ุญูุงุธุช ุงุฒ ุณูุงูุช ุจุฎุด ุจุฒุฑฺฏ ุงุฒ ุณุงฺฉูุงู ุงุณุช.' },
                26: { level: '๐ฑ ุณุทุญ ด: ูพุงุฏุงุฑ ุฒุณุชโูุญุท', detail: '<strong>ุฑุชุจู ฒถ: ูุงุถูุงุจ ูุญูู ณ:</strong> ๐ก ุญูุงุธุช ุงุฒ ฺฉ ูุทุจ ุฌูุนุช: ุงู ูพุฑูฺู ุจุง ุชุญุช ูพูุดุด ูุฑุงุฑ ุฏุงุฏู ุฌูุนุช ุจุงูุง ูุญูู ณุ ฺฉ ฺฏุงู ุจุฒุฑฺฏ ุฏุฑ ุฌูุช ฺฉูุชุฑู ุขูุงูุฏูโูุง ู ุงุฑุชูุง ุจูุฏุงุดุช ุนููู ุฏุฑ ฺฉ ุงุฒ ูุฑุงฺฉุฒ ุงุตู ุณฺฉููุช ุดูุฑฺฉ ูุญุณูุจ ูโุดูุฏ.' },
                27: { level: '๐ฑ ุณุทุญ ด: ูพุงุฏุงุฑ ุฒุณุชโูุญุท', detail: '<strong>ุฑุชุจู ฒท: ูุงุถูุงุจ ูุญูู ฒ:</strong> ๐ก ุญุฏุงฺฉุซุฑ ูพูุดุด ุจูุฏุงุดุช: ุชูุฑฺฉุฒ ุจุฑ ุจุฒุฑฺฏุชุฑู ุฌูุนุช ุดูุฑฺฉ (ดถทน ุฎุงููุงุฑ)ุ ุงู ูพุฑูฺู ุฑุง ุจู ููุซุฑุชุฑู ุงูุฏุงู ุจุฑุง ฺฉุงูุด ุฑุณฺฉโูุง ุจูุฏุงุดุช ู ุฒุณุชโูุญุท ุฏุฑ ููุงุณ ฺฉูุงู ุชุจุฏู ูโฺฉูุฏ.' },
                28: { level: '๐ฑ ุณุทุญ ด: ูพุงุฏุงุฑ ุฒุณุชโูุญุท', detail: '<strong>ุฑุชุจู ฒธ: ูุงุถูุงุจ ูุญูู ถ:</strong> ๐ก ุชฺฉูู ุญููู ุณูุงูุช: ุขุฎุฑู ูพุฑูฺู ูุงุถูุงุจ ุฏุฑ ุจุฎุด ุชูุณุนูโุงูุชู ุดูุฑฺฉ ฺฉู ุจุง ุงุฌุฑุง ุขูุ ุชูุงู ููุงุทู ูพุฑุฌูุนุช ุชุญุช ูพูุดุด ฺฉุงูู ุดุจฺฉู ุฌูุนโุขูุฑ ุจูุฏุงุดุช ูุฑุงุฑ ูโฺฏุฑูุฏ.' },
                29: { level: '๐ฑ ุณุทุญ ด: ูพุงุฏุงุฑ ุฒุณุชโูุญุท', detail: '<strong>ุฑุชุจู ฒน: ูุงุถูุงุจ ูุญูู ธ:</strong> ๐ก ุณุฑูุงูโฺฏุฐุงุฑ ุจุฑุง ุขูุฏู: ุจุง ูุฌูุฏ ูุฒูู ุจุณุงุฑ ุจุงูุงุ ุงุฌุฑุง ุงู ูพุฑูฺู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุขููุฏฺฏ ุฎุงฺฉ ู ุขุจ ุฏุฑ ููุงุทู ุฏุฑ ุญุงู ุชูุณุนู ู ุชุถูู ุณูุงูุช ุขุช ุณุงฺฉูุงูุ ฺฉ ุถุฑูุฑุช ุงูฺฉุงุฑูุงูพุฐุฑ ุงุณุช.' },
                30: { level: '๐ฑ ุณุทุญ ด: ูพุงุฏุงุฑ ุฒุณุชโูุญุท', detail: '<strong>ุฑุชุจู ณฐ: ูุงุถูุงุจ ูุญูู ท:</strong> ๐ก ุชุนูุฏ ุจู ุชูุณุนู ูพุงุฏุงุฑ: ุงู ูพุฑูฺู ุจุง ูุฌูุฏ ุงูฺฉู ฺฏุฑุงูโุชุฑู ุณุฑูุงูโฺฏุฐุงุฑ ุจู ุงุฒุง ูุฑ ุฎุงููุงุฑ ุฏุฑ ุจุฎุด ูุงุถูุงุจ ุงุณุช (ูุฒูู/ุฎุงููุงุฑ: ฒธนถฑ.ต)ุ ุชุนูุฏ ฺฉุงูู ุดูุฑฺฉ ุจู ุชูุณุนู ฑฐฐูช ูพุงุฏุงุฑ ู ุญูุธ ูุญุท ุฒุณุช ุญุช ุฏุฑ ฺฉูโุฌูุนุชโุชุฑู ููุงุทู ุฑุง ูุดุงู ูโุฏูุฏ.' },
                31: { level: '๐ฑ ุณุทุญ ด: ูพุงุฏุงุฑ ุฒุณุชโูุญุท', detail: '<strong>ุฑุชุจู ณฑ: ูุงุถูุงุจ ูุญูู ด:</strong> ๐ก ุงูุฏุงู ูพุดฺฏุฑุงูู: ุงุฌุฑุง ุดุจฺฉู ูุงุถูุงุจ ุฏุฑ ุงู ูุญููุ ฺฉ ุงูุฏุงู ูพุดฺฏุฑุงูู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุดฺฉูุงุช ุฒุณุชโูุญุท ุขุช ุงุณุช ฺฉู ุจุง ุฑุดุฏ ุฌูุนุช ุฏุฑ ุงู ููุทูู ููฺฉู ุงุณุช ุจู ูุฌูุฏ ุขุฏ.' },
                32: { level: '๐ฑ ุณุทุญ ด: ูพุงุฏุงุฑ ุฒุณุชโูุญุท', detail: '<strong>ุฑุชุจู ณฒ: ูุงุถูุงุจ ูุญูู ฑ:</strong> ๐ก ุชฺฉูู ูพุงุฒู ุฒุณุชโูุญุท: ุงู ูพุฑูฺู ุจู ุนููุงู ุขุฎุฑู ูุทุนู ุงุฒ ูพุงุฒู ูุงุถูุงุจุ ูพูุดุด ฺฉุงูู ุจูุฏุงุดุช ู ุฒุณุชโูุญุท ุฑุง ุจุฑุง ุชูุงู ุดูุฑฺฉ ุชุถูู ฺฉุฑุฏู ู ูพุฑููุฏู ุชุฃุณุณุงุช ุฒุฑุฒูู ุฑุง ูโุจูุฏุฏ.' },
                33: { level: '๐ฃ๏ธ ุณุทุญ ต: ุชฺฉูู ููุง', detail: '<strong>ุฑุชุจู ณณ: ุฑุงูโุณุงุฒ ูุญูู ต:</strong> ๐ก ฺฉุงุฑุขูุฏุชุฑู ุฒุจุงุณุงุฒ: ุงู ูพุฑูฺู ุจุง ฺฉูุชุฑู ูุฒูู ุจู ุงุฒุง ูุฑ ุฎุงููุงุฑ (ดถ.ฐ ูุงุญุฏ) ุฏุฑ ุจุฎุด ุฑุงูโุณุงุฒุ ููุทูโุชุฑู ููุทู ุจุฑุง ุดุฑูุน ุงู ูุงุฒ ููุง ู ุงุฌุงุฏ ฺฉ ูุชุฌู ููููุณ ู ุณุฑุน ุงุณุช.' },
                34: { level: '๐ฃ๏ธ ุณุทุญ ต: ุชฺฉูู ููุง', detail: '<strong>ุฑุชุจู ณด: ุฑุงูโุณุงุฒ ูุญูู ณ:</strong> ๐ก ุงุฑุชูุง ฺฉูุช ุฒูุฏฺฏ: ุชฺฉูู ูุนุงุจุฑ ุฏุฑ ฺฉ ุงุฒ ูพุฑุฌูุนุชโุชุฑู ูุญูุงุชุ ุชุฃุซุฑ ูุณุชูู ู ฺฏุณุชุฑุฏูโุง ุจุฑ ฺฉูุช ุฒูุฏฺฏ ุฑูุฒูุฑู ุณุงฺฉูุงู ุฎูุงูุฏ ุฏุงุดุช.' },
                35: { level: '๐ฃ๏ธ ุณุทุญ ต: ุชฺฉูู ููุง', detail: '<strong>ุฑุชุจู ณต: ุฑุงูโุณุงุฒ ูุญูู ฒ:</strong> ๐ก ููุงโุณุงุฒ ุจุฒุฑฺฏุชุฑู ูุญูู: ุงุฌุฑุง ุงู ูพุฑูฺูุ ฺูุฑู ููุง ุจุฒุฑฺฏุชุฑู ูุฑฺฉุฒ ุฌูุนุช ุดูุฑฺฉ ุฑุง ุดฺฉู ุฏุงุฏู ู ุจู ุณุฑูุงูโฺฏุฐุงุฑโูุง ุงูุฌุงู ุดุฏู ุฏุฑ ุขู ุฌูููโุง ฺฉุงูู ูโุจุฎุดุฏ.' },
                36: { level: '๐ฃ๏ธ ุณุทุญ ต: ุชฺฉูู ููุง', detail: '<strong>ุฑุชุจู ณถ: ุฑุงูโุณุงุฒ ูุญูู ถ:</strong> ๐ก ุชฺฉูู ูุชูุงุฒู: ุขุฎุฑู ูพุฑูฺู ุฑุงูโุณุงุฒ ุฏุฑ ุจุฎุด ุชูุณุนูโุงูุชู ุดูุฑฺฉ ฺฉู ุจุง ุงุฌุฑุง ุขูุ ุชูุงู ูุญูุงุช ุงุตู ุฏุงุฑุง ูุนุงุจุฑ ฺฉุงูู ู ุงุณุชุงูุฏุงุฑุฏ ูโุดููุฏ.' },
                37: { level: '๐ฃ๏ธ ุณุทุญ ต: ุชฺฉูู ููุง', detail: '<strong>ุฑุชุจู ณท: ุฑุงูโุณุงุฒ ูุญูู ฑ:</strong> ๐ก ุชูุณุนู ฺฉูพุงุฑฺู: ุจุง ูุฌูุฏ ุฌูุนุช ฺฉูุ ุชฺฉูู ูุนุงุจุฑ ุงู ูุญูู ุจุฑุง ุญูุธ ฺฉูพุงุฑฺฺฏ ู ุงุณุชุงูุฏุงุฑุฏ ฺฉูุช ุฏุฑ ฺฉู ุดูุฑฺฉ ุถุฑูุฑ ุงุณุช.' },
                38: { level: '๐ฃ๏ธ ุณุทุญ ต: ุชฺฉูู ููุง', detail: '<strong>ุฑุชุจู ณธ: ุฑุงูโุณุงุฒ ูุญูู ด:</strong> ๐ก ุขูุงุฏูโุณุงุฒ ุจุฑุง ุฑุดุฏ: ุชฺฉูู ุฑุงูโุณุงุฒ ุฏุฑ ุงู ูุญููุ ุฒุฑุณุงุฎุช ููุง ุฑุง ุจุฑุง ุฌุฐุจ ุฌูุนุช ู ุฑุดุฏ ุขุช ุขู ูุฑุงูู ูโฺฉูุฏ.' },
                39: { level: '๐ฃ๏ธ ุณุทุญ ต: ุชฺฉูู ููุง', detail: '<strong>ุฑุชุจู ณน: ุฑุงูโุณุงุฒ ูุญูู ธ:</strong> ๐ก ุชุญูู ูุนุฏู ุชูุณุนู: ุงู ูพุฑูฺู ุจุง ูุฌูุฏ ูุฒูู ุจุณุงุฑ ุจุงูุงุ ูุนุฏู ุชูุณุนู ฺฉุงูู ุฒุฑุณุงุฎุชโูุง ุฑุง ุฏุฑ ููุงุทู ฺฉูุชุฑ ุจุฑุฎูุฑุฏุงุฑ ูุญูู ฺฉุฑุฏู ู ุงุฑุฒุด ุงูุฒูุฏู ุงููุงฺฉ ุขู ุฑุง ููุง ูโฺฉูุฏ.' },
                40: { level: '๐ฃ๏ธ ุณุทุญ ต: ุชฺฉูู ููุง', detail: '<strong>ุฑุชุจู ดฐ: ุฑุงูโุณุงุฒ ูุญูู ท:</strong> ๐ก ุขุฎุฑู ูููโูู ุจุฑ ุจูู ุดูุฑฺฉ: ุงู ูพุฑูฺู ุจุง ูพุงูโุชุฑู ุงูููุช ูู ู ุจุงูุงุชุฑู ูุฒูู ุจู ุงุฒุง ูุฑ ุฎุงููุงุฑ (ณณ,ฒถน ูุงุญุฏ) ุฏุฑ ฺฉู ูุงุชุฑุณุ ุจู ุนููุงู ุขุฎุฑู ุงูุฏุงู ุนูุฑุงูุ ุชฺฉูู ููุง ุจูู ุชูุณุนู ุดูุฑฺฉ ููฺฉโุขุจุฑูุฏ ุฑุง ุฑูู ูโุฒูุฏ.' }
            };
            
            const initialWeights = { social: 25, economic: 30, technical: 35, environmental: 10 };
            let currentWeights = { ...initialWeights };
            let topProjectsChart, projectTypeChart, neighborhoodRankChart;
            let currentRankings = [];
            let typeAveragesWithCost = [];

            const scenarios = {
                 SMART_GROWTH: { name: 'ุณูุงุฑู ูพุดููุงุฏ: ุฑุดุฏ ููุดููุฏ ู ุฏุณุชุงูุฑุฏูุง ุณุฑุน', icon: '๐ง', color: '#475569', content: `<p class="text-slate-600 mb-4">ุงู ุงุณุชุฑุงุชฺ ฺฉ ุฑูฺฉุฑุฏ ูุชุนุงุฏู ู ูพุดููุงุฏ ุงุณุช ฺฉู ุจุง ุงูููุช ุฏุงุฏู ุจู <strong style="color:#bc5090;">ุชูุงู ูู</strong> ู <strong style="color:#ef5675;">ฺฉุงุฑุง ุงูุชุตุงุฏ</strong>ุ ุจู ุฏูุจุงู ฺฉุณุจ ุฏุณุชุงูุฑุฏูุง ุณุฑุน ู ุงุฌุงุฏ ฺฉ ุจุณุชุฑ ูพุงุฏุงุฑ ุจุฑุง ุชูุณุนูโูุง ุขุช ุงุณุช.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 text-sm"><div><h4 class="font-bold mb-2 text-slate-800">ุชุญูู ุงูููุชโูุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li><strong>ุงูููุช ุจุงูุง:</strong> ูพุฑูฺูโูุง <strong style="color:#bc5090;">ุขุจ ู ุจุฑู</strong> ุฏุฑ ูุญูุงุช ฺฉุงุฑุขูุฏ (ฒุ ณ ู ต) ุจู ุฏูู ุชุฑฺฉุจ ุจููู ุงููุช ูู ู ุจุงุฒุฏู ุงูุชุตุงุฏ.</li><li><strong>ุงูููุช ูุงู:</strong> ูพุฑูฺูโูุง ุขุจ ู ุจุฑู ุฏุฑ ูุญูุงุช ูุญุฑูู (ท ู ธ) ู ูพุฑูฺูโูุง ฺฏุงุฒุฑุณุงู ุฏุฑ ูุญูุงุช ฺฉุงุฑุขูุฏ.</li><li><strong>ุงูููุช ูพุงู:</strong> ูพุฑูฺูโูุง <strong style="color:#475569;">ุฑุงูโุณุงุฒ ู ูุงุถูุงุจ</strong> ุจู ุฏูู ูุฑุงุฑฺฏุฑ ุฏุฑ ุงูุชูุง ุชูุงู ูู.</li></ul></div><div><h4 class="font-bold mb-2 text-slate-800">ูุฒุงุง ฺฉูุฏ ุงุณุชุฑุงุชฺ:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ุฌุงูุนโูฺฏุฑ (ูพูุดุด ุงุจุนุงุฏ ููุ ุงูุชุตุงุฏ ู ุงุฌุชูุงุน)</li><li>ุงุฌุงุฏ ุฏุณุชุงูุฑุฏูุง ุณุฑุน ู ูุงุจู ูุดุงูุฏู</li><li>ูุฏุฑุช ุฑุณฺฉ ู ุฌููฺฏุฑ ุงุฒ ุฏูุจุงุฑูโฺฉุงุฑ</li><li>ูุงุจู ุฏูุงุน ุงุฒ ูุธุฑ ุณุงุณ ู ุงุฌุชูุงุน</li></ul></div></div><div class="mt-4 pt-3 border-t border-slate-200 text-center font-bold text-slate-800"><p>"ุงู ุฑูฺฉุฑุฏุ ุชุฎุตุต ููุงุจุน ุฑุง ุจู ฺฏูููโุง ูุฏุฑุช ูโฺฉูุฏ ฺฉู ุงุจุชุฏุง ุจุง ุงุฌุฑุง ูพุฑูฺูโูุง ุฒุฑุจูุงู ุญุงุช ุฏุฑ ฺฉุงุฑุขูุฏุชุฑู ููุงุทูุ ุจุดุชุฑู ุจุงุฒุฏู ุงุฌุชูุงุน ู ุงูุชุตุงุฏ ุญุงุตู ุดูุฏ. ุณูพุณุ ุจุง ุชูุฑฺฉุฒ ุจุฑ ููุงุทู ฺฉูุชุฑ ุชูุณุนูโุงูุชูุ ุนุฏุงูุช ุงุฌุชูุงุน ุฑุง ูุญูู ุณุงุฎุชู ู ุฏุฑ ููุงุชุ ุดุจฺฉูโูุง ุฒุฑุณุงุฎุช ุฑุง ุชฺฉูู ูโููุงุฏ."</p></div>` },
                 JUSTICE: { name: 'ุณูุงุฑู ยซุนุฏุงูุชโูุญูุฑยป', icon: 'โ๏ธ', color: '#7a5195', content: `<p class="text-slate-600 mb-4">ุงู ุงุณุชุฑุงุชฺุ ุณุฑูุงูโฺฏุฐุงุฑ ุฑุง ุงุจุฒุงุฑ ุจุฑุง <strong>ฺฉุงูุด ูุงุจุฑุงุจุฑ</strong> ู ุชุญูู ุนุฏุงูุช ุงุฌุชูุงุน ูโุจูุฏ.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 text-sm"><div><h4 class="font-bold mb-2 text-green-600">ูุฒุงุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ุงูุฒุงุด ุณุฑูุงู ุงุฌุชูุงุน ู ุงุนุชูุงุฏ ุนููู</li><li>ฺฉุงูุด ุฑุณฺฉโูุง ุงุฌุชูุงุน-ุงููุช</li><li>ุชูุณุนู ูุชูุงุฒู ุจููุฏูุฏุช</li></ul></div><div><h4 class="font-bold mb-2 text-red-600">ูุนุงุจ ู ุฑุณฺฉโูุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ฺฉุงุฑุง ูพุงู ุณุฑูุงูโฺฏุฐุงุฑ</li><li>ฺฉูุฏ ูพุดุฑูุช ฺฉู ูพุฑูฺูโูุง</li><li>ุฑุณฺฉ ูุงุฑุถุงุช ุฏุฑ ุณุงุฑ ููุงุทู</li></ul></div></div><div class="mt-4 pt-3 border-t border-slate-200 text-center font-bold text-slate-800"><p><strong>ุชุบุฑ ุงูููุชโูุง:</strong> ูพุฑูฺูโูุง <strong>ูุญููโูุง ท ู ธ</strong> ุจู ุตุฏุฑ ูุณุช ุตุนูุฏ ฺฉุฑุฏู ู ูพุฑูฺูโูุง ฺฉุงุฑุขูุฏุชุฑ ุฏุฑ ูุญูุงุช ุชูุณุนูโุงูุชู ุจู ุฑุชุจูโูุง ูพุงูโุชุฑ ููุชูู ูโุดููุฏ.</p></div>` },
                 EFFICIENCY: { name: 'ุณูุงุฑู ยซฺฉุงุฑุงโูุญูุฑยป', icon: '๐ฐ', color: '#ef5675', content: `<p class="text-slate-600 mb-4">ุงู ุงุณุชุฑุงุชฺ ฺฉ ุฑูฺฉุฑุฏ ฺฉูุงุณฺฉ <strong>ูุฒูู-ูุงุฏู</strong> ุงุณุช ฺฉู ูุฏู ุขู ุจู ุญุฏุงฺฉุซุฑ ุฑุณุงูุฏู ุฎุฑูุฌ ุจุง ููุงุจุน ูุญุฏูุฏ ูโุจุงุดุฏ.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 text-sm"><div><h4 class="font-bold mb-2 text-green-600">ูุฒุงุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ุจุงุฒุฏู ุณุฑุน ู ูุงุจู ูุดุงูุฏู</li><li>ุชูุฌู ุงูุชุตุงุฏ ูู</li><li>ุจูููโุณุงุฒ ููุงุจุน ูุญุฏูุฏ</li></ul></div><div><h4 class="font-bold mb-2 text-red-600">ูุนุงุจ ู ุฑุณฺฉโูุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ุชุดุฏุฏ ูุงุจุฑุงุจุฑ ู ุงุฌุงุฏ ุดฺฉุงู</li><li>ุฑุณฺฉ ุจุงูุง ุชูุด ุงุฌุชูุงุน</li><li>ุงุฌุงุฏ "ุฌุฒุงุฑ ุชูุณุนูโูุงูุชู"</li><li>ุฏุฏฺฏุงู ฺฉูุชุงูโูุฏุช</li></ul></div></div><div class="mt-4 pt-3 border-t border-slate-200 text-center font-bold text-slate-800"><p><strong>ุชุบุฑ ุงูููุชโูุง:</strong> ูพุฑูฺูโูุง <strong>ุขุจ ู ุจุฑู ุฏุฑ ูุญููโูุง ฒุ ณ ู ต</strong> ุฏุฑ ุงูููุช ูุทูู ูุฑุงุฑ ฺฏุฑูุชู ู ูพุฑูฺูโูุง ุญุงุช ุฏุฑ ูุญูุงุช ูุญุฑูู ุจู ุชุนูู ูโุงูุชูุฏ.</p></div>` },
                 TECHNICAL: { name: 'ุณูุงุฑู ยซููโูุญูุฑยป', icon: 'โ๏ธ', color: '#bc5090', content: `<p class="text-slate-600 mb-4">ุงู ุงุณุชุฑุงุชฺุ ุชูุณุนู ุฒุฑุณุงุฎุช ุฑุง ฺฉ ูุฑุขูุฏ ูููุฏุณ <strong>ูุงูโุจูโูุงู ู ฺฉุงููุงู ููุทู</strong> ูโุฏุงูุฏ ู ุนูุงูู ุงูุณุงู ุฑุง ุฏุฑ ุงูููุช ุฏูู ูุฑุงุฑ ูโุฏูุฏ.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 text-sm"><div><h4 class="font-bold mb-2 text-green-600">ูุฒุงุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ุงุฌุฑุง ููุธู ู ุจุฏูู ุชุฏุงุฎู</li><li>ฺฉูุช ุจุงูุง ูู ู ูพุงุฏุงุฑ</li><li>ุจุฑูุงููโุฑุฒ ุดูุงู ู ูุงุจู ูพุดโุจู</li></ul></div><div><h4 class="font-bold mb-2 text-red-600">ูุนุงุจ ู ุฑุณฺฉโูุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ูุงุฏุฏู ฺฏุฑูุชู ูุงุฒูุง ููุฑ ุงูุณุงู</li><li>ุนุฏู ุงูุนุทุงูโูพุฐุฑ</li><li>ฺฉูุฏ ุฏุฑ ูพุงุณุฎฺฏู ุจู ุดูุฑููุฏุงู</li></ul></div></div><div class="mt-4 pt-3 border-t border-slate-200 text-center font-bold text-slate-800"><p><strong>ุชุบุฑ ุงูููุชโูุง:</strong> ูุณุช ุจุฑ ุงุณุงุณ ููุน ูพุฑูฺู ูุฑุชุจ ูโุดูุฏุ ุงุจุชุฏุง <strong>ุชูุงู ูพุฑูฺูโูุง ุขุจุฑุณุงู</strong>ุ ุณูพุณ <strong>ุชูุงู ูพุฑูฺูโูุง ุจุฑูโุฑุณุงู</strong> ู ุงู ุขุฎุฑ.</p></div>` },
                 ENVIRONMENT: { name: 'ุณูุงุฑู ยซูุญุทโุฒุณุชโูุญูุฑยป', icon: '๐ฟ', color: '#ffa600', content: `<p class="text-slate-600 mb-4">ุงู ุงุณุชุฑุงุชฺุ <strong>ุณูุงูุช ุงฺฉูุณุณุชู</strong> ู ูพุงุฏุงุฑ ููุงุจุน ุฑุง ุจู ุนููุงู ูพุดโุดุฑุท ุงุตู ูุฑฺฏููู ุชูุณุนูโุง ุฏุฑ ูุธุฑ ูโฺฏุฑุฏ.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 text-sm"><div><h4 class="font-bold mb-2 text-green-600">ูุฒุงุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ุญูุงุธุช ุงุฒ ููุงุจุน ุญุงุช ุจููุฏูุฏุช</li><li>ฺฉุงูุด ูุฒููโูุง ุขุช</li><li>ุจุฑูุฏุณุงุฒ ุจู ุนููุงู ููุทูู ุณุจุฒ</li></ul></div><div><h4 class="font-bold mb-2 text-red-600">ูุนุงุจ ู ุฑุณฺฉโูุง:</h4><ul class="list-disc pr-4 space-y-1 text-slate-700"><li>ุนุฏู ุชุทุงุจู ุจุง ุงูููุชโูุง ููุฑ ูุฑุฏู</li><li>ุชูุฌู ุฏุดูุงุฑ ุจุฑุง ุนููู</li><li>ฺฉุงูุด ุณุฑุนุช ุชุฃูู ุฎุฏูุงุช ุฑูุงู</li></ul></div></div><div class="mt-4 pt-3 border-t border-slate-200 text-center font-bold text-slate-800"><p><strong>ุชุบุฑ ุงูููุชโูุง:</strong> ูพุฑูฺูโูุง <strong>ุดุจฺฉู ุฌูุนโุขูุฑ ูุงุถูุงุจ</strong> ุฌูุด ูุงุจู ุชูุฌู ุฏุฑ ูุณุช ุฎูุงููุฏ ุฏุงุดุช ู ูพุณ ุงุฒ ูพุฑูฺูโูุง ุขุจ ู ุจุฑู ูุฑุงุฑ ูโฺฏุฑูุฏ.</p></div>` }
            };
            
            function normalizeMatrix(matrix, criteria) {
                let normalized = JSON.parse(JSON.stringify(matrix));
                for (const key in criteria) {
                    const values = matrix.map(p => p[key]);
                    const min = Math.min(...values);
                    const max = Math.max(...values);
                    normalized.forEach(p => {
                        if (max === min) p[key] = 1;
                        else p[key] = criteria[key].positive ? (p[key] - min) / (max - min) : (max - p[key]) / (max - min);
                    });
                }
                return normalized;
            }

            function topsis(normalizedMatrix, weights) {
                const weightedMatrix = normalizedMatrix.map(p => {
                    let newP = { id: p.id };
                    for (const key in criteriaInfo) newP[key] = p[key] * weights[key];
                    return newP;
                });

                const idealBest = {}, idealWorst = {};
                for (const key in criteriaInfo) {
                    const values = weightedMatrix.map(p => p[key]);
                    idealBest[key] = Math.max(...values);
                    idealWorst[key] = Math.min(...values);
                }

                const distances = weightedMatrix.map(p => {
                    let distBest = 0, distWorst = 0;
                    for (const key in criteriaInfo) {
                        distBest += Math.pow(p[key] - idealBest[key], 2);
                        distWorst += Math.pow(p[key] - idealWorst[key], 2);
                    }
                    return { id: p.id, distBest: Math.sqrt(distBest), distWorst: Math.sqrt(distWorst) };
                });
                
                return distances.map(d => {
                    const closeness = d.distWorst / (d.distBest + d.distWorst);
                    const originalData = decisionMatrix.find(item => item.id === d.id);
                    return { 
                        id: d.id, 
                        name: originalData.project, 
                        neighborhood: originalData.neighborhood, 
                        finalScore: isNaN(closeness) ? 0 : parseFloat((closeness * 100).toFixed(4))
                    };
                }).sort((a, b) => b.finalScore - a.finalScore);
            }

            function calculateAndRankProjects(dimensionWeights) {
                 const adjustedWeights = {
                    crit_lack:        baseWeights.crit_lack        * (dimensionWeights.social / initialWeights.social),
                    crit_pop:         baseWeights.crit_pop         * (dimensionWeights.social / initialWeights.social),
                    crit_health:      baseWeights.crit_health      * (dimensionWeights.social / initialWeights.social),
                    crit_cost_per_hh: baseWeights.crit_cost_per_hh * (dimensionWeights.economic / initialWeights.economic),
                    crit_cost_total:  baseWeights.crit_cost_total  * (dimensionWeights.economic / initialWeights.economic),
                    crit_sequence:    baseWeights.crit_sequence    * (dimensionWeights.technical / initialWeights.technical),
                    crit_env:         baseWeights.crit_env         * (dimensionWeights.environmental / initialWeights.environmental)
                 };
                 const total = Object.values(adjustedWeights).reduce((a, b) => a + b, 0);
                 if (total > 0) for (const key in adjustedWeights) adjustedWeights[key] /= total;
                
                const normalizedData = normalizeMatrix(decisionMatrix, criteriaInfo);
                return topsis(normalizedData, adjustedWeights);
            }
           
            function getGradientColor(rank, total) {
                const p = (rank - 1) / (total - 1);
                const hue = 240 - (p * 240);
                return `hsl(${hue}, 85%, 55%)`; 
            }

            function getRankJustification(project, rank) {
                const justification = rankJustifications[rank];
                if (justification) {
                    return `<strong class="block text-amber-300">${justification.level}</strong><hr class="my-1 border-slate-600"><p class="text-xs text-right leading-relaxed px-1 py-1">${justification.detail}</p>`;
                }
                 return 'ุชุญูู ูุฏุฑุช ุจุฑุง ุงู ุฑุชุจู ุงุฑุงุฆู ูุดุฏู ุงุณุช.';
            }

            function updateAllVisuals(rankedProjects) {
                currentRankings = rankedProjects;
                updateTopProjectsChart(rankedProjects);
                updateTypeChart(rankedProjects);
                updatePriorityMatrix(rankedProjects);
                updateTimeline(rankedProjects);
            }

            function updateTopProjectsChart(rankedProjects) {
                const top10 = rankedProjects.slice(0, 10);
                topProjectsChart.data.labels = top10.map(p => `${p.name} - ูุญูู ${p.neighborhood}`);
                topProjectsChart.data.datasets[0].data = top10.map(p => p.finalScore);
                topProjectsChart.data.datasets[0].backgroundColor = top10.map((p, i) => getGradientColor(i + 1, 40));
                topProjectsChart.update();
            }

            function updateTypeChart(rankedProjects) {
                const projectTypeTotalCosts = { 'ุขุจุฑุณุงู': 680, 'ุจุฑูโุฑุณุงู': 1031, 'ฺฏุงุฒุฑุณุงู': 1096, 'ูุงุถูุงุจ': 6860, 'ุฑุงูโุณุงุฒ': 4704, 'ุฒูฺฉุด': 1473, 'ุฎุฏูุงุช ุฑูุจูุง': 149.2, 'ูพุฑูฺูโูุง ฺฏุฑุฏุดฺฏุฑ': 50000 };
                const types = ['ุขุจุฑุณุงู', 'ุจุฑูโุฑุณุงู', 'ฺฏุงุฒุฑุณุงู', 'ูุงุถูุงุจ', 'ุฑุงูโุณุงุฒ'];
                typeAveragesWithCost = types.map(type => {
                    const projectsOfType = rankedProjects.filter(p => p.name === type);
                    const avgScore = projectsOfType.length ? projectsOfType.reduce((acc, p) => acc + p.finalScore, 0) / projectsOfType.length : 0;
                    return { type, avgScore: parseFloat(avgScore.toFixed(3)), totalCost: projectTypeTotalCosts[type] || 0 };
                });
                typeAveragesWithCost.push(
                    { type: 'ุฎุฏูุงุช ุฑูุจูุง', avgScore: 40.0, totalCost: projectTypeTotalCosts['ุฎุฏูุงุช ุฑูุจูุง'] },
                    { type: 'ุฒูฺฉุด', avgScore: 25.0, totalCost: projectTypeTotalCosts['ุฒูฺฉุด'] },
                    { type: 'ูพุฑูฺูโูุง ฺฏุฑุฏุดฺฏุฑ', avgScore: 13.0, totalCost: projectTypeTotalCosts['ูพุฑูฺูโูุง ฺฏุฑุฏุดฺฏุฑ'] }
                );
                typeAveragesWithCost.sort((a,b) => b.avgScore - a.avgScore);
                const scores = typeAveragesWithCost.map(t => t.avgScore);
                const minScore = Math.min(...scores), maxScore = Math.max(...scores);
                projectTypeChart.data.labels = typeAveragesWithCost.map(t => t.type);
                projectTypeChart.data.datasets[0].data = scores;
                projectTypeChart.data.datasets[0].backgroundColor = scores.map(s => {
                    if (maxScore === minScore) return `hsl(210, 85%, 55%)`; 
                    const p = (s - minScore) / (maxScore - minScore);
                    return `hsl(${30 + p * 180}, 85%, 55%)`; 
                });
                projectTypeChart.update();
            }

            function updatePriorityMatrix(rankedProjects) {
                const matrix = document.getElementById('priority-matrix');
                matrix.innerHTML = '';
                const headers = ['', 'ุขุจุฑุณุงู', 'ุจุฑูโ', 'ฺฏุงุฒ', 'ูุงุถูุงุจ', 'ุฑุงูโุณุงุฒ'];
                headers.forEach(h => {
                    const cell = document.createElement('div');
                    cell.className = 'font-bold text-slate-500 flex items-end justify-center pb-1';
                    cell.textContent = h;
                    matrix.appendChild(cell);
                });
                const projectRanks = {};
                rankedProjects.forEach((p, i) => { projectRanks[p.id] = i + 1; });
                const projectTypes = ['ุขุจุฑุณุงู', 'ุจุฑูโุฑุณุงู', 'ฺฏุงุฒุฑุณุงู', 'ูุงุถูุงุจ', 'ุฑุงูโุณุงุฒ'];
                for (let i = 1; i <= 8; i++) {
                    const rowHeader = document.createElement('div');
                    rowHeader.className = 'font-bold text-slate-500 flex items-center justify-center';
                    rowHeader.textContent = `ูุญูู ${i}`;
                    matrix.appendChild(rowHeader);
                    projectTypes.forEach(type => {
                        const project = decisionMatrix.find(p => p.neighborhood === i && p.project === type);
                        if (!project) return;
                        const rank = projectRanks[project.id];
                        const cell = document.createElement('div');
                        cell.className = 'tooltip matrix-tooltip';
                        const cellContent = document.createElement('div');
                        cellContent.className = 'priority-matrix-cell';
                        cellContent.style.backgroundColor = getGradientColor(rank, 40);
                        cellContent.textContent = rank;
                        const tooltipText = document.createElement('span');
                        tooltipText.className = 'tooltiptext';
                        const justification = getRankJustification(project, rank);
                        tooltipText.innerHTML = `<strong class="block">${project.project} - ูุญูู ${project.neighborhood}</strong>${justification}`;
                        cell.appendChild(cellContent);
                        cell.appendChild(tooltipText);
                        matrix.appendChild(cell);
                    });
                }
            }

             function updateTimeline(rankedProjects) {
                const typeScores = { 'ุขุจุฑุณุงู': 0, 'ุจุฑูโุฑุณุงู': 0, 'ฺฏุงุฒุฑุณุงู': 0, 'ูุงุถูุงุจ': 0, 'ุฑุงูโุณุงุฒ': 0 };
                const typeCounts = { 'ุขุจุฑุณุงู': 0, 'ุจุฑูโุฑุณุงู': 0, 'ฺฏุงุฒุฑุณุงู': 0, 'ูุงุถูุงุจ': 0, 'ุฑุงูโุณุงุฒ': 0 };
                rankedProjects.forEach(p => {
                    if (typeScores.hasOwnProperty(p.name)) {
                        typeScores[p.name] += p.finalScore;
                        typeCounts[p.name]++;
                    }
                });
                const typeAverages = Object.keys(typeScores).map(type => ({
                    type,
                    avgScore: typeScores[type] / typeCounts[type]
                })).sort((a, b) => b.avgScore - a.avgScore);

                const dominantType = typeAverages[0].type;
                let timelineHTML = '';
                let summaryData = [];

                if (dominantType === 'ูุงุถูุงุจ') {
                    // Environmental Scenario
                    document.getElementById('timeline-intro').textContent = 'ุงู ููุดู ุฑุงูุ ุจุฑ ุงุณุงุณ ุณูุงุฑู ูุญุทโุฒุณุชโูุญูุฑุ ุญูุงุธุช ุงุฒ ููุงุจุน ุขุจ ู ุฎุงฺฉ ุฑุง ุฏุฑ ุงูููุช ูุทูู ูุฑุงุฑ ูโุฏูุฏ.';
                    timelineHTML = generateEnvironmentalTimeline();
                    summaryData = [
                        { phase: 'ฑ', year: 'ฑดฐต', goal: 'ุญูุงุธุช ุญุฏุงฺฉุซุฑ ู ุงุณุชูุฑุงุฑ ุฎุฏูุงุช ูพุงู', keyProjects: 'ุชฺฉูู ฑฐฐูช ูุงุถูุงุจ ู ุชุตููโุฎุงูู / ุดุฑูุน ูุฏุฑุชููุฏ ุขุจ ู ุจุฑู', color: 'teal' },
                        { phase: 'ฒ', year: 'ฑดฐถ', goal: 'ุชฺฉูู ุฒุฑุณุงุฎุชโูุง ุญุงุช', keyProjects: 'ุชฺฉูู ุขุจ ู ุจุฑู / ุดุฑูุน ูพุฑูฺู ุนุธู ุฒูฺฉุด', color: 'red' },
                        { phase: 'ณ', year: 'ฑดฐท', goal: 'ุชฺฉูู ฺฏุงุฒ ู ุขูุงุฏูโุณุงุฒ ุฒูู', keyProjects: 'ุชฺฉูู ฺฏุงุฒุฑุณุงู / ูพุดุฑูุช ุนูุฏู ุฒูฺฉุด', color: 'orange' },
                        { phase: 'ด', year: 'ฑดฐธ', goal: 'ุชฺฉูู ุฒูู ู ุขุบุงุฒ ูพุฑูฺูโูุง ููุง', keyProjects: 'ุชฺฉูู ุฒูฺฉุด / ุดุฑูุน ุฑุงูโุณุงุฒ ู ูุฑูฺฏุงู', color: 'sky' },
                        { phase: 'ต', year: 'ฑดฐน', goal: 'ุจูุฑูโุจุฑุฏุงุฑ ููุง ู ุชุถูู ูพุงุฏุงุฑ', keyProjects: 'ุชฺฉูู ููุง ุฑุงูโุณุงุฒ ู ูุฑูฺฏุงู', color: 'emerald' }
                    ];
                } else if (dominantType === 'ุฑุงูโุณุงุฒ') {
                    // Roadworks Scenario
                    document.getElementById('timeline-intro').textContent = 'ุงู ููุดู ุฑุงูุ ุจุฑ ุงุณุงุณ ุณูุงุฑู ุฑุงูโุณุงุฒโูุญูุฑุ ุฒุจุงุณุงุฒ ู ุชฺฉูู ูุนุงุจุฑ ุฑุง ุฏุฑ ุงูููุช ูุฑุงุฑ ูโุฏูุฏ. ุชูุฌู: ุงู ุณูุงุฑู ุจุง ุฑุณฺฉโูุง ูู ููุฑุงู ุงุณุช.';
                    timelineHTML = generateRoadworksTimeline();
                     summaryData = [
                        { phase: 'ฑ', year: 'ฑดฐต', goal: 'ุชฺฉูู ูุนุงุจุฑ ู ุฒุจุงุณุงุฒ', keyProjects: 'ุชฺฉูู ฑฐฐูช ุฑุงูโุณุงุฒ (ุจุง ุฑุณฺฉ ุฏูุจุงุฑูโฺฉุงุฑ)', color: 'gray' },
                        { phase: 'ฒ', year: 'ฑดฐถ', goal: 'ุงุฌุฑุง ุฒุฑุณุงุฎุชโูุง ุญุงุช (ุญูุงุฑ ูุฌุฏุฏ)', keyProjects: 'ุชฺฉูู ุขุจ ู ุจุฑู', color: 'red' },
                        { phase: 'ณ', year: 'ฑดฐท', goal: 'ุงุฌุฑุง ุฒุฑุณุงุฎุชโูุง ุฑูุงู ู ูุญุท', keyProjects: 'ุชฺฉูู ฺฏุงุฒ ู ูุงุถูุงุจ / ุดุฑูุน ุฒูฺฉุด', color: 'orange' },
                        { phase: 'ด', year: 'ฑดฐธ', goal: 'ุชฺฉูู ูพุฑูฺูโูุง ุฒุฑุฒูู', keyProjects: 'ุชฺฉูู ุฒูฺฉุด ู ุชุตููโุฎุงูู / ุดุฑูุน ูุฑูฺฏุงู', color: 'sky' },
                        { phase: 'ต', year: 'ฑดฐน', goal: 'ุจูุฑูโุจุฑุฏุงุฑ ู ุชุถูู ูพุงุฏุงุฑ', keyProjects: 'ุชฺฉูู ููุง ูุฑูฺฏุงู', color: 'emerald' }
                    ];
                } else {
                    // Default Technical/Economic Scenario
                    document.getElementById('timeline-intro').textContent = 'ุงู ููุดู ุฑุงูุ ุฎุฑูุฌ ฺฉู ู ุฑุชุจูโุจูุฏ ุดุฏู ูุงุชุฑุณ ุชุญูู AHP-TOPSIS ุฑุง ุจู ฺฉ ุจุฑูุงูู ุงุฌุฑุง ู ุนููุงุช ุฏุฑ ุงูู ต ุณุงูู ุชุจุฏู ูโฺฉูุฏ. ููุทู ุญุงฺฉู ุจุฑ ุงู ุฒูุงูโุจูุฏุ ุงุฌุฑุง ูพุฑูฺูโูุง ุจุฑ ุงุณุงุณ ุงูููุช ูู ู ุถุฑูุฑุช ุฑุงูุจุฑุฏ ุงุณุช.';
                    timelineHTML = generateDefaultTimeline();
                     summaryData = [
                        { phase: 'ฑ', year: 'ฑดฐต', goal: 'ุชูุงูููุฏุณุงุฒ ุญุฏุงฺฉุซุฑ ู ุงุณุชูุฑุงุฑ ุฎุฏูุงุช ูพุงู', keyProjects: 'ุชฺฉูู ฑฐฐูช ุขุจุ ุจุฑูุ ฺฏุงุฒ ู ุณุงุฎุชูุงูโูุง / ุดุฑูุน ูุฏุฑุชููุฏ ูุงุถูุงุจ', color: 'red' },
                        { phase: 'ฒ', year: 'ฑดฐถ', goal: 'ุชฺฉูู ฺุฑุฎู ุขุจ ู ุขูุงุฏูโุณุงุฒ ุฒูู', keyProjects: 'ุชฺฉูู ูุงุถูุงุจ ู ูุฑูุฏโูุง / ุดุฑูุน ูพุฑูฺู ุนุธู ุฒูฺฉุด', color: 'orange' },
                        { phase: 'ณ', year: 'ฑดฐท', goal: 'ุชูุฑฺฉุฒ ุจุฑ ุฒุฑุณุงุฎุชโูุง ุฒุณุชโูุญุท', keyProjects: 'ูพุดุฑูุช ุนูุฏู ุฒูฺฉุด / ุชฺฉูู ุชุตููโุฎุงูู', color: 'yellow' },
                        { phase: 'ด', year: 'ฑดฐธ', goal: 'ุชฺฉูู ุฒูู ู ุขุบุงุฒ ูพุฑูฺูโูุง ฺฉูุงู ู ููุง', keyProjects: 'ุชฺฉูู ุฒูฺฉุด / ุดุฑูุน ุฑุงูโุณุงุฒ ู ูุฑูฺฏุงู', color: 'sky' },
                        { phase: 'ต', year: 'ฑดฐน', goal: 'ุจูุฑูโุจุฑุฏุงุฑ ููุง ู ุชุถูู ูพุงุฏุงุฑ', keyProjects: 'ุชฺฉูู ููุง ุฑุงูโุณุงุฒ ู ูุฑูฺฏุงู', color: 'emerald' }
                    ];
                }
                document.getElementById('timeline-container').innerHTML = timelineHTML;
                
                const summaryTableBody = document.querySelector('#timeline-summary-table tbody');
                summaryTableBody.innerHTML = '';
                summaryData.forEach(row => {
                    summaryTableBody.innerHTML += `
                        <tr class="border-b bg-${row.color}-50">
                            <td class="p-3 font-bold text-${row.color}-700">ูุงุฒ ${row.phase}</td>
                            <td class="p-3">${row.year}</td>
                            <td class="p-3">${row.goal}</td>
                            <td class="p-3">${row.keyProjects}</td>
                        </tr>
                    `;
                });
            }

            function generateDefaultTimeline() {
                return `
                <!-- Year 1 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-red-100 border-red-500"><span class="font-bold text-red-600">ฑ</span></div>
                    <h3 class="font-bold text-xl text-red-700 mb-2">ุณุงู ุงูู (ฑดฐต): ุชูุงูููุฏุณุงุฒ ุญุฏุงฺฉุซุฑ ู ุงุณุชูุฑุงุฑ ุฎุฏูุงุช ูพุงู</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: <span class="text-red-600">ุญุฐู ฺฉุงูู ููุงูุน ุฒุฑุจูุง ุณฺฉููุช</span> ู ุงุณุชูุฑุงุฑ ุฎุฏูุงุช ุนููู ุถุฑูุฑ ุจุฑุง ูุนุงูโุณุงุฒ ููุฑ ูพุชุงูุณู ฺฉู ุดูุฑฺฉ.</p>
                    <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-red-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                            <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง <strong class="text-sky-600">ุขุจุฑุณุงู</strong> (ุจุงูุงุชุฑู ุงูููุช ูู).</li>
                            <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง <strong class="text-yellow-600">ุจุฑูโุฑุณุงู</strong> (ุฏููู ุงูููุช ูู).</li>
                            <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง <strong class="text-orange-600">ฺฏุงุฒุฑุณุงู</strong> (ุณููู ุงูููุช ูู).</li>
                            <li>ุชฺฉูู ฑฐฐูช ุณุงุฎุชูุงูโูุง ุฎุฏูุงุช (ุขุชุดโูุดุงู ู ุฏุฑูุงูฺฏุงู).</li>
                            <li>ุขุบุงุฒ ูุฏุฑุชููุฏ ุดุจฺฉู ุฌูุนโุขูุฑ ูุงุถูุงุจ ุจุง ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ถฐูช.</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-3 pt-2 border-t border-slate-200"><strong class="text-slate-600">ุชูุฌู ุฑุงูุจุฑุฏ:</strong> ุงู ฺฉ ูุงุฒ ุชูุงุฌู ุจุฑุง ุงุฌุฑุง ููุฑ ูพุฑูฺูโูุง ุงุณุช ฺฉู ุจุงูุงุชุฑู ุงูุชุงุฒ ุฑุง ุฏุฑ ูุนุงุฑ ยซุชูุงู ูู ู ุถุฑูุฑุช ุงุฌุฑุงยป ฺฉุณุจ ฺฉุฑุฏูโุงูุฏ. ุจุง ุชฺฉูู ููุฒูุงู ุณู ุฒุฑุณุงุฎุช ุงุตูุ ุจุณุชุฑ ุณฺฉููุช ู ุณุงุฎุชโูุณุงุฒ ุจู ุณุฑุนุช ูุฑุงูู ูโุดูุฏ.</p>
                    </div>
                </div>
                <!-- Year 2 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-orange-100 border-orange-500"><span class="font-bold text-orange-600">ฒ</span></div>
                    <h3 class="font-bold text-xl text-orange-700 mb-2">ุณุงู ุฏูู (ฑดฐถ): ุชฺฉูู ฺุฑุฎู ุขุจ ู ุขูุงุฏูโุณุงุฒ ุฒูู</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุงุชูุงู ฺฉุงูู ุฒุฑุณุงุฎุชโูุง ูุฑุชุจุท ุจุง ุขุจ ู ูุงุถูุงุจุ ุจูุจูุฏ ุฏุณุชุฑุณโูุง ู ุขุบุงุฒ ูพุฑูฺู ุนุธู ุขูุงุฏูโุณุงุฒ ุฒูู.</p>
                     <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-orange-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                            <li>ุชฺฉูู ุดุจฺฉู ุฌูุนโุขูุฑ <strong class="text-teal-600">ูุงุถูุงุจ</strong> (ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ฑฐฐูช).</li>
                            <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง ูุนุจุฑ ุฏุณุชุฑุณ ุบุฑุจ ู ุงุตูุงุญ ููุฏุณ ูุฑูุฏ.</li>
                            <li>ุขุบุงุฒ ูพุฑูฺู <strong class="text-cyan-600">ุฒูฺฉุด ู ูุฏุงุช ุขุจโูุง ุณุทุญ</strong> ุจุง ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ฒตูช.</li>
                        </ul>
                         <p class="text-xs text-slate-500 mt-3 pt-2 border-t border-slate-200"><strong class="text-slate-600">ุชูุฌู ุฑุงูุจุฑุฏ:</strong> ุจุง ุชฺฉูู ุดุจฺฉู ูุงุถูุงุจุ ูพุฑูฺูโูุง ฺฉู ุงูุชุงุฒ ุจุงูุง ุฏุฑ ูุนุงุฑูุง ยซุจูุฏุงุดุช ุนูููยป ู ยซูพุงุฏุงุฑ ุฒุณุชโูุญุทยป ุฏุงุดุชูุฏ ุจู ุณุฑุงูุฌุงู ูโุฑุณูุฏ. ุขุบุงุฒ ูพุฑูฺู ุฒูฺฉุดุ ฺฉ ุงูุฏุงู ุถุฑูุฑ ู ููุทุจู ุจุฑ ุชูุงู ูู ูพุด ุงุฒ ูุฑฺฏููู ุนููุงุช ุฑุงูโุณุงุฒ ุงุณุช.</p>
                    </div>
                </div>
                <!-- Year 3 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-yellow-100 border-yellow-500"><span class="font-bold text-yellow-600">ณ</span></div>
                    <h3 class="font-bold text-xl text-yellow-700 mb-2">ุณุงู ุณูู (ฑดฐท): ุชูุฑฺฉุฒ ุจุฑ ุฒุฑุณุงุฎุชโูุง ุฒุณุชโูุญุท</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ูพุดุจุฑุฏ ุนูุฏู ูพุฑูฺูโูุง ูุฑุชุจุท ุจุง ุขุจ ู ุฎุงฺฉ ุจุฑุง ุขูุงุฏูโุณุงุฒ ููุง ุณุงุช ุฌูุช ูุงุฒ ุชฺฉูู.</p>
                     <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-yellow-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                             <li>ุงุฏุงูู ูพุฑูฺู <strong class="text-cyan-600">ุฒูฺฉุด ู ูุฏุงุช ุขุจโูุง ุณุทุญ</strong> (ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ธฐูช).</li>
                             <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺู <strong class="text-green-600">ุชุตููโุฎุงูู ูุงุถูุงุจ</strong>.</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-3 pt-2 border-t border-slate-200"><strong class="text-slate-600">ุชูุฌู ุฑุงูุจุฑุฏ:</strong> ุงู ุณุงู ุจู ุทูุฑ ฺฉุงูู ุจู ูพุฑูฺูโูุง ุจุง ูุงูุช ุฒุณุชโูุญุท ุงุฎุชุตุงุต ุฏุงุฑุฏ. ุชฺฉูู ุชุตููโุฎุงููุ ฺุฑุฎู ูุฏุฑุช ูพุงุฏุงุฑ ุขุจ ุฑุง ฺฉุงูู ูโฺฉูุฏ ู ูพุดุฑูุช ฺุดูฺฏุฑ ุฏุฑ ุฒูฺฉุดุ ุฒูู ุฑุง ุจุฑุง ุงุฌุฑุง ูพุฑูฺูโูุง ุฑุงูโุณุงุฒ ุขูุงุฏู ูโุณุงุฒุฏ.</p>
                    </div>
                </div>
                <!-- Year 4 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-sky-100 border-sky-500"><span class="font-bold text-sky-600">ด</span></div>
                    <h3 class="font-bold text-xl text-sky-700 mb-2">ุณุงู ฺูุงุฑู (ฑดฐธ): ุชฺฉูู ุฒูู ู ุขุบุงุฒ ูพุฑูฺูโูุง ฺฉูุงู ู ููุง</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุงุชูุงู ฺฉุงูู ุขูุงุฏูโุณุงุฒ ุฒูู ู ุขุบุงุฒ ููุงุฒ ูพุฑูฺูโูุง ููุง ุฒุจุงุณุงุฒ ู ุชุฃูู ุงูุฑฺ ุจููุฏูุฏุช.</p>
                    <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-sky-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                            <li>ุชฺฉูู ูพุฑูฺู <strong class="text-cyan-600">ุฒูฺฉุด ู ูุฏุงุช ุขุจโูุง ุณุทุญ</strong> (ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ฑฐฐูช).</li>
                            <li>ุขุบุงุฒ ูพุฑูฺูโูุง <strong class="text-gray-600">ุฑุงูโุณุงุฒ</strong> ุจุง ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ถฐูช.</li>
                            <li>ุขุบุงุฒ ูพุฑูฺู <strong class="text-indigo-600">ูพุณุช ุจุฑู ู ูุฑูฺฏุงู</strong> ุจุง ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ฒทูช.</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-3 pt-2 border-t border-slate-200"><strong class="text-slate-600">ุชูุฌู ุฑุงูุจุฑุฏ:</strong> ุจุง ุชฺฉูู ุฒูฺฉุดุ ููุงูุน ูู ุจุฑุง ุงุฌุฑุง ุฑุงูโุณุงุฒ ุจุฑุทุฑู ูโุดูุฏ. ููุฒูุงูุ ูพุฑูฺูโูุง ฺฉูุงู ู ุงุณุชุฑุงุชฺฺฉ ูุงููุฏ ูุฑูฺฏุงู ฺฉู ุจุฑุง ูพุงุฏุงุฑ ุจููุฏูุฏุช ุถุฑูุฑ ูุณุชูุฏุ ุชูุฌู ุงุฌุฑุง ูพุฏุง ูโฺฉููุฏ.</p>
                    </div>
                </div>
                <!-- Year 5 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-emerald-100 border-emerald-500"><span class="font-bold text-emerald-600">ต</span></div>
                    <h3 class="font-bold text-xl text-emerald-700 mb-2">ุณุงู ูพูุฌู (ฑดฐน): ุจูุฑูโุจุฑุฏุงุฑ ููุง ู ุชุถูู ูพุงุฏุงุฑ</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุงุชูุงู ฺฉูู ูพุฑูฺูโูุง ู ุจูุฑูโุจุฑุฏุงุฑ ฺฉุงูู ุงุฒ ุดูุฑฺฉ ุจุง ุชูุงู ุฒุฑุณุงุฎุชโูุง ูุฏุฑู.</p>
                    <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-emerald-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                            <li>ุชฺฉูู ูพุฑูฺูโูุง <strong class="text-gray-600">ุฑุงูโุณุงุฒ</strong> (ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ฑฐฐูช).</li>
                            <li>ุชฺฉูู ูพุฑูฺู <strong class="text-indigo-600">ูพุณุช ุจุฑู ู ูุฑูฺฏุงู</strong> (ุฑุณุฏู ุจู ูพุดุฑูุช ุชุฌูุน ฑฐฐูช).</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-3 pt-2 border-t border-slate-200"><strong class="text-slate-600">ุชูุฌู ุฑุงูุจุฑุฏ:</strong> ุงู ุณุงูุ ุณุงู ุจู ุซูุฑ ุฑุณุฏู ุจุฑูุงูู ุงุณุช. ุจุง ุชฺฉูู ุฑุงูโุณุงุฒุ ุขุฎุฑู ูุงู ูู ุงุฌุฑุง ูโุดูุฏ ู ุชฺฉูู ูุฑูฺฏุงูุ ูพุงุฏุงุฑ ู ูุงุจูุช ุงุทููุงู ฺฉู ุดุจฺฉู ุฑุง ุจุฑุง ุขูุฏู ุชุถูู ูโฺฉูุฏ.</p>
                    </div>
                </div>`;
            }

            function generateEnvironmentalTimeline() {
                 return `
                <!-- Year 1 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-teal-100 border-teal-500"><span class="font-bold text-teal-600">ฑ</span></div>
                    <h3 class="font-bold text-xl text-teal-700 mb-2">ุณุงู ุงูู (ฑดฐต): ุญูุงุธุช ุญุฏุงฺฉุซุฑ ู ุงุณุชูุฑุงุฑ ุฎุฏูุงุช ูพุงู</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: <span class="text-teal-600">ุญูุงุธุช ููุฑ ุงุฒ ููุงุจุน ุขุจ ู ุฎุงฺฉ</span> ู ุขุบุงุฒ ููุงุฒ ุฎุฏูุงุช ูพุงู.</p>
                    <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-teal-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                            <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง <strong class="text-teal-600">ูุงุถูุงุจ</strong> ู <strong class="text-green-600">ุชุตููโุฎุงูู</strong>.</li>
                            <li>ุขุบุงุฒ ูุฏุฑุชููุฏ ูพุฑูฺูโูุง <strong class="text-sky-600">ุขุจุฑุณุงู</strong> ู <strong class="text-yellow-600">ุจุฑูโุฑุณุงู</strong> (ูพุดุฑูุช ถฐูช).</li>
                            <li>ุขุบุงุฒ ูพุฑูฺู <strong class="text-cyan-600">ุฒูฺฉุด</strong> (ูพุดุฑูุช ฒตูช).</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-3 pt-2 border-t border-slate-200"><strong class="text-slate-600">ุชูุฌู ุฑุงูุจุฑุฏ:</strong> ุจุฑ ุงุณุงุณ ุณูุงุฑู ูุญุทโุฒุณุชโูุญูุฑุ ูพุฑูฺูโูุง ุจุง ุจุงูุงุชุฑู ุงูุชุงุฒ ยซูพุงุฏุงุฑยป ุฏุฑ ุงูููุช ูุทูู ูุฑุงุฑ ูโฺฏุฑูุฏ ุชุง ุงุฒ ูุฑฺฏููู ุขููุฏฺฏ ุขุช ุฌููฺฏุฑ ุดูุฏ.</p>
                    </div>
                </div>
                 <!-- Year 2 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-red-100 border-red-500"><span class="font-bold text-red-600">ฒ</span></div>
                    <h3 class="font-bold text-xl text-red-700 mb-2">ุณุงู ุฏูู (ฑดฐถ): ุชฺฉูู ุฒุฑุณุงุฎุชโูุง ุญุงุช</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุงุชูุงู ฺฉุงูู ูพุฑูฺูโูุง ุขุจ ู ุจุฑู ู ุงุณุชูุฑุงุฑ ุฎุฏูุงุช ุนููู.</p>
                     <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-red-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                            <li>ุชฺฉูู ุดุจฺฉู <strong class="text-sky-600">ุขุจุฑุณุงู</strong> ู <strong class="text-yellow-600">ุจุฑูโุฑุณุงู</strong> (ุฑุณุฏู ุจู ฑฐฐูช).</li>
                             <li>ุชฺฉูู ฑฐฐูช ุณุงุฎุชูุงูโูุง ุฎุฏูุงุช (ุขุชุดโูุดุงู ู ุฏุฑูุงูฺฏุงู).</li>
                             <li>ุงุฏุงูู ูพุฑูฺู <strong class="text-cyan-600">ุฒูฺฉุด</strong> (ุฑุณุฏู ุจู ธฐูช).</li>
                        </ul>
                         <p class="text-xs text-slate-500 mt-3 pt-2 border-t border-slate-200"><strong class="text-slate-600">ุชูุฌู ุฑุงูุจุฑุฏ:</strong> ูพุณ ุงุฒ ุชุถูู ุณูุงูุช ูุญุท ุฒุณุชุ ุฒุฑุณุงุฎุชโูุง ุญุงุช ุจุฑุง ุณฺฉููุช ุชฺฉูู ูโุดููุฏ.</p>
                    </div>
                </div>
                <!-- Year 3 -->
                 <div class="timeline-item">
                    <div class="timeline-icon bg-orange-100 border-orange-500"><span class="font-bold text-orange-600">ณ</span></div>
                    <h3 class="font-bold text-xl text-orange-700 mb-2">ุณุงู ุณูู (ฑดฐท): ฺฏุณุชุฑุด ุฑูุงู ู ุขูุงุฏูโุณุงุฒ ุฒูู</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุชฺฉูู ุดุจฺฉู ฺฏุงุฒ ู ุขูุงุฏูโุณุงุฒ ููุง ุฒูู.</p>
                     <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-orange-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                             <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง <strong class="text-orange-600">ฺฏุงุฒุฑุณุงู</strong>.</li>
                             <li>ุชฺฉูู ูพุฑูฺู <strong class="text-cyan-600">ุฒูฺฉุด</strong> (ุฑุณุฏู ุจู ฑฐฐูช).</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-3 pt-2 border-t border-slate-200"><strong class="text-slate-600">ุชูุฌู ุฑุงูุจุฑุฏ:</strong> ุฏุฑ ุงู ูุฑุญูู ุฒุฑุณุงุฎุชโูุง ุฑูุงู ุงุฌุฑุง ุดุฏู ู ุฒูู ุจุฑุง ูุงุฒ ููุง ุขูุงุฏู ูโุดูุฏ.</p>
                    </div>
                </div>
                <!-- Year 4 & 5 are combined as they become simpler -->
                 <div class="timeline-item">
                    <div class="timeline-icon bg-sky-100 border-sky-500"><span class="font-bold text-sky-600">ด</span></div>
                    <h3 class="font-bold text-xl text-sky-700 mb-2">ุณุงู ฺูุงุฑู (ฑดฐธ): ุขุบุงุฒ ูพุฑูฺูโูุง ููุง</h3>
                     <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุขุบุงุฒ ูพุฑูฺูโูุง ฺฉูุงู ู ุฒุจุงุณุงุฒ.</p>
                    <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-sky-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                             <li>ุขุบุงุฒ ูพุฑูฺูโูุง <strong class="text-gray-600">ุฑุงูโุณุงุฒ</strong> (ูพุดุฑูุช ถฐูช).</li>
                             <li>ุขุบุงุฒ ูพุฑูฺู <strong class="text-indigo-600">ูพุณุช ุจุฑู ู ูุฑูฺฏุงู</strong> (ูพุดุฑูุช ฒทูช).</li>
                        </ul>
                    </div>
                </div>
                 <div class="timeline-item">
                    <div class="timeline-icon bg-emerald-100 border-emerald-500"><span class="font-bold text-emerald-600">ต</span></div>
                    <h3 class="font-bold text-xl text-emerald-700 mb-2">ุณุงู ูพูุฌู (ฑดฐน): ุจูุฑูโุจุฑุฏุงุฑ ููุง</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุชฺฉูู ฺฉูู ูพุฑูฺูโูุง.</p>
                     <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-emerald-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                            <li>ุชฺฉูู ูพุฑูฺูโูุง <strong class="text-gray-600">ุฑุงูโุณุงุฒ</strong> ู <strong class="text-indigo-600">ูุฑูฺฏุงู</strong> (ฑฐฐูช).</li>
                        </ul>
                    </div>
                </div>
                `;
            }

             function generateRoadworksTimeline() {
                return `
                 <!-- Year 1 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-gray-100 border-gray-500"><span class="font-bold text-gray-600">ฑ</span></div>
                    <h3 class="font-bold text-xl text-gray-700 mb-2">ุณุงู ุงูู (ฑดฐต): ุชฺฉูู ูุนุงุจุฑ ู ุฒุจุงุณุงุฒ</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุงุฌุฑุง ฺฉุงูู ูพุฑูฺูโูุง ุฑุงูโุณุงุฒ ุจุฑ ุงุณุงุณ ุงูููุช ุจุงูุง ุงูุชุฎุงุจ.</p>
                    <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-gray-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                            <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง <strong class="text-gray-600">ุฑุงูโุณุงุฒ</strong> ู ูุนุงุจุฑ ุฏุณุชุฑุณ.</li>
                        </ul>
                        <p class="text-xs text-red-600 font-bold mt-3 pt-2 border-t border-slate-200"><strong>ูุดุฏุงุฑ ุฑุงูุจุฑุฏ:</strong> ุงู ุณูุงุฑูุ ุชูุงู ูู ุงุณุชุงูุฏุงุฑุฏ ุฑุง ูุงุฏุฏู ูโฺฏุฑุฏ. ุงุฌุฑุง ูพุฑูฺูโูุง ุฒุฑุฒูู ุฏุฑ ุณุงูโูุง ุขุช ูุงุฒููุฏ ุชุฎุฑุจ ู ุฏูุจุงุฑูโฺฉุงุฑ ฺฏุณุชุฑุฏู ุฏุฑ ูุนุงุจุฑ ุฎูุงูุฏ ุจูุฏ ฺฉู ูุฒููโูุง ูุงุจู ุชูุฌู ุฑุง ุจู ูพุฑูฺู ุชุญูู ูโฺฉูุฏ.</p>
                    </div>
                </div>
                 <!-- Year 2 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-red-100 border-red-500"><span class="font-bold text-red-600">ฒ</span></div>
                    <h3 class="font-bold text-xl text-red-700 mb-2">ุณุงู ุฏูู (ฑดฐถ): ุงุฌุฑุง ุฒุฑุณุงุฎุชโูุง ุญุงุช (ูุงุฒููุฏ ุญูุงุฑ ูุฌุฏุฏ)</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุชุงูู ุขุจ ู ุจุฑู ุจุฑุง ุดูุฑฺฉ ุจุง ูพุฐุฑุด ูุฒููโูุง ุฏูุจุงุฑูโฺฉุงุฑ.</p>
                     <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-red-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                             <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง <strong class="text-sky-600">ุขุจุฑุณุงู</strong> ู <strong class="text-yellow-600">ุจุฑูโุฑุณุงู</strong>.</li>
                        </ul>
                    </div>
                </div>
                 <!-- Year 3 -->
                <div class="timeline-item">
                    <div class="timeline-icon bg-orange-100 border-orange-500"><span class="font-bold text-orange-600">ณ</span></div>
                    <h3 class="font-bold text-xl text-orange-700 mb-2">ุณุงู ุณูู (ฑดฐท): ุงุฌุฑุง ุฒุฑุณุงุฎุชโูุง ุฑูุงู ู ูุญุท</h3>
                    <p class="font-semibold text-slate-800 mb-2">ูุฏู ุงุณุชุฑุงุชฺฺฉ: ุชฺฉูู ุดุจฺฉู ฺฏุงุฒ ู ูุงุถูุงุจ.</p>
                     <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-orange-400">
                        <h4 class="font-bold text-slate-700 mb-2">ูพุฑูฺูโูุง ฺฉูุฏ:</h4>
                        <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                             <li>ุชฺฉูู ฑฐฐูช ูพุฑูฺูโูุง <strong class="text-orange-600">ฺฏุงุฒุฑุณุงู</strong> ู <strong class="text-teal-600">ูุงุถูุงุจ</strong>.</li>
                        </ul>
                    </div>
                </div>
                <!-- Year 4 & 5 -->
                 <div class="timeline-item">
                    <div class="timeline-icon bg-sky-100 border-sky-500"><span class="font-bold text-sky-600">ด</span></div>
                    <h3 class="font-bold text-xl text-sky-700 mb-2">ุณุงู ฺูุงุฑู (ฑดฐธ): ูพุฑูฺูโูุง ุชฺฉูู ู ูพุดุชุจุงู</h3>
                    <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-sky-400">
                         <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                             <li>ุชฺฉูู <strong class="text-green-600">ุชุตููโุฎุงูู</strong>ุ <strong class="text-cyan-600">ุฒูฺฉุด</strong> ู ุณุงุฎุชูุงูโูุง ุฎุฏูุงุช.</li>
                         </ul>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon bg-emerald-100 border-emerald-500"><span class="font-bold text-emerald-600">ต</span></div>
                    <h3 class="font-bold text-xl text-emerald-700 mb-2">ุณุงู ูพูุฌู (ฑดฐน): ุชุถูู ูพุงุฏุงุฑ ุจููุฏูุฏุช</h3>
                     <div class="bg-slate-50 p-3 rounded-lg border-r-4 border-emerald-400">
                         <ul class="list-disc pr-5 space-y-1 text-slate-600 text-sm">
                             <li>ุชฺฉูู <strong class="text-indigo-600">ูพุณุช ุจุฑู ู ูุฑูฺฏุงู</strong>.</li>
                         </ul>
                    </div>
                </div>
                `;
            }

            function updateScenarioCard() {
                const weights = currentWeights;
                let activeScenario = scenarios.SMART_GROWTH;
                const maxWeight = Math.max(weights.social, weights.economic, weights.technical, weights.environmental);
                if (maxWeight > 45) {
                    if (maxWeight === weights.social) activeScenario = scenarios.JUSTICE;
                    else if (maxWeight === weights.economic) activeScenario = scenarios.EFFICIENCY;
                    else if (maxWeight === weights.technical) activeScenario = scenarios.TECHNICAL;
                    else if (maxWeight === weights.environmental) activeScenario = scenarios.ENVIRONMENT;
                }
                const card = document.getElementById('scenario-card');
                card.style.borderColor = activeScenario.color;
                document.getElementById('scenario-icon').textContent = activeScenario.icon;
                document.getElementById('scenario-title').textContent = activeScenario.name;
                document.getElementById('scenario-content').innerHTML = activeScenario.content;
            }

            function setupControls() {
                const sliders = { social: document.getElementById('social-weight'), economic: document.getElementById('economic-weight'), technical: document.getElementById('technical-weight'), environmental: document.getElementById('environmental-weight') };
                const valueDisplays = { social: document.getElementById('social-weight-value'), economic: document.getElementById('economic-weight-value'), technical: document.getElementById('technical-weight-value'), environmental: document.getElementById('environmental-weight-value') };
                const cardValueDisplays = { social: document.getElementById('social-card-value'), economic: document.getElementById('economic-card-value'), technical: document.getElementById('technical-card-value'), environmental: document.getElementById('environmental-card-value') };

                function updateAllSliderUI() {
                    Object.keys(currentWeights).forEach(key => {
                        const val = Math.round(currentWeights[key]);
                        sliders[key].value = val;
                        const displayVal = `${val}%`;
                        valueDisplays[key].textContent = displayVal;
                        cardValueDisplays[key].textContent = displayVal;
                        const thumbColor = sliders[key].style.getPropertyValue('--thumb-color');
                        sliders[key].style.background = `linear-gradient(to left, ${thumbColor} ${val}%, #e2e8f0 ${val}%)`;
                    });
                }
                
                function syncAndNormalize(changedKey, newValue) {
                    let otherKeys = Object.keys(currentWeights).filter(k => k !== changedKey);
                    let sumOfOthersBeforeChange = otherKeys.reduce((acc, key) => currentWeights[key] + acc, 0);
                    let tempWeights = { ...currentWeights };
                    if (sumOfOthersBeforeChange < 1) { 
                        const valuePerKey = (100 - newValue) / otherKeys.length;
                        otherKeys.forEach(key => { tempWeights[key] = valuePerKey; });
                    } else {
                        const remainingPercentage = 100 - newValue;
                        otherKeys.forEach(key => { tempWeights[key] = remainingPercentage * (currentWeights[key] / sumOfOthersBeforeChange); });
                    }
                    tempWeights[changedKey] = newValue;
                    let total = Object.values(tempWeights).reduce((a, b) => a + b, 0);
                    tempWeights[changedKey] += (100 - total); 
                    currentWeights = tempWeights;
                    updateAllSliderUI();
                    
                    const dynamicRanks = calculateAndRankProjects(currentWeights);
                    updateAllVisuals(dynamicRanks);
                    updateScenarioCard();
                }
                
                Object.keys(sliders).forEach(key => {
                    sliders[key].addEventListener('input', (e) => syncAndNormalize(key, parseInt(e.target.value, 10)) );
                });

                document.getElementById('reset-weights').addEventListener('click', () => {
                    currentWeights = { ...initialWeights };
                    updateAllSliderUI();
                    updateAllVisuals(baselineRankings);
                    updateScenarioCard();
                });

                topProjectsChart = new Chart(document.getElementById('topProjectsChart').getContext('2d'), {
                    type: 'bar', data: { labels: [], datasets: [{ label: 'ุงูุชุงุฒ ููุง', data: [], borderRadius: 4 }] },
                    options: { 
                        indexAxis: 'y', responsive: true, maintainAspectRatio: false, 
                        scales: { x: { beginAtZero: true, grid: { color: '#e2e8f0' }, ticks: { color: '#475569', font: { weight: 'bold' } } }, y: { grid: { display: false }, ticks: { color: '#475569', font: { weight: 'bold', size: 11 } } } }, 
                        plugins: { 
                            legend: { display: false }, 
                            tooltip: { 
                                rtl: true, titleFont: { family: 'Vazirmatn' }, bodyFont: { family: 'Vazirmatn' },
                                callbacks: { 
                                    afterBody: (context) => {
                                        const project = currentRankings[context[0].dataIndex];
                                        if (!project) return '';
                                        const rank = context[0].dataIndex + 1;
                                        const justification = rankJustifications[rank];
                                        if (justification) {
                                            const detail = justification.detail.replace(/<[^>]*>?/gm, ''); // Strip HTML for plain text
                                            const wrapWidth = 40;
                                            let wrappedText = [];
                                            let currentLine = '';
                                            detail.split(' ').forEach(word => {
                                                if ((currentLine + word).length > wrapWidth) {
                                                    wrappedText.push(currentLine);
                                                    currentLine = '';
                                                }
                                                currentLine += word + ' ';
                                            });
                                            wrappedText.push(currentLine);
                                            return '\n' + justification.level + '\n' + wrappedText.join('\n');
                                        }
                                        return '';
                                    }
                                } 
                            } 
                        } 
                    }
                });

                projectTypeChart = new Chart(document.getElementById('projectTypeChart').getContext('2d'), {
                    type: 'bar', data: { labels: [], datasets: [{ label: 'ูุงูฺฏู ุงูุชุงุฒ', data: [], borderRadius: 4 }] },
                     options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, grid: { color: '#e2e8f0' }, ticks: { color: '#475569', font: { weight: 'bold' } } }, x: { grid: { color: '#e2e8f0' }, ticks: { color: '#334155', font: { weight: 'bold', size: 12 } } } }, plugins: { legend: { display: false }, tooltip: { rtl: true, titleFont: { family: 'Vazirmatn' }, bodyFont: { family: 'Vazirmatn' }, callbacks: { afterLabel: (context) => { const typeInfo = typeAveragesWithCost[context.dataIndex]; if (typeInfo) { let tip = `ูุฒูู ฺฉู: ${(typeInfo.totalCost / 10).toLocaleString('fa-IR', { maximumFractionDigits: 1 })} ููุงุฑุฏ ุชููุงู`; if (typeInfo.type === 'ุจุฑูโุฑุณุงู') tip += '\n(ุจุฏูู ูุฒูู ุชุฌูุฒุงุช ูพุณุช)'; return tip; } return ''; } } } } }
                });

                const neighborhoodData = [
                    { priority: 1, neighborhood: 'ูุญูู ต', score: 169.1159, analysis: 'ุจุงูุงุชุฑู ุงูููุช ุจู ุฏูู ฺฉุงุฑุง ุงูุชุตุงุฏ ุจุงูุง ูพุฑูฺูโูุง (ูุฒูู ฺฉู/ุฎุงููุงุฑ ุจุงูุง).' },
                    { priority: 2, neighborhood: 'ูุญูู ณ', score: 167.8326, analysis: 'ุงูููุช ุจุงูุง ุจู ุฏูู ุฌูุนุช ุฒุงุฏ ู ูุฒูู ูุณุจุชุงู ูพุงู ูพุฑูฺูโูุง ุชฺฉูู.' },
                    { priority: 3, neighborhood: 'ูุญูู ฒ', score: 166.5575, analysis: 'ูุดุงุจู ูุญูู ณุ ูพุฑูฺูโูุง ุงู ูุญูู ุจุงุฒุฏู ุณุฑุน ุณุฑูุงู ุฑุง ุจู ููุฑุงู ุฏุงุฑูุฏ.' },
                    { priority: 4, neighborhood: 'ูุญูู ถ', score: 145.5248, analysis: 'ุงูููุช ูุชูุณุทุ ุนูุฏุชุงู ุจุฑุง ูพุดุชุจุงู ุงุฒ ุชูุณุนู ุจููุฏูุฑุชุจู.' },
                    { priority: 5, neighborhood: 'ูุญูู ธ', score: 103.4094, analysis: 'ุจุง ูุฌูุฏ ูุงุฒ ุจุงูุงุ ูุฒูู ุจุงูุง ูพุฑูฺูโูุง ุงูููุช ุขู ุฑุง ูุณุจุช ุจู ูุญูุงุช ุชูุณุนูโุงูุชู ฺฉุงูุด ูโุฏูุฏ.' },
                    { priority: 6, neighborhood: 'ูุญูู ท', score: 95.91011, analysis: 'ุจุงูุงุชุฑู ุญุฌู ฺฉูุจูุฏ ุฒุฑุณุงุฎุชุ ุงูุง ุจู ุฏูู ุฌูุนุช ฺฉู ู ูุฒูู ุจุงูุง ุฏุฑ ุงูููุช ุจุนุฏ ูุฑุงุฑ ูโฺฏุฑุฏ.' },
                    { priority: 7, neighborhood: 'ูุญูู ด', score: 80.07699, analysis: 'ูุงุฒููุฏ ุชูุฌู ูฺู ุฏุฑ ูุงุฒูุง ุจุนุฏ ุชูุณุนู.' },
                    { priority: 8, neighborhood: 'ูุญูู ฑ', score: 79.37764, analysis: 'ฺฉูุจูุฏูุง ูพุฑุงฺฉูุฏู ุจูุฏู ู ุงุฒ ูุธุฑ ุฑุงูุจุฑุฏ ุฏุฑ ุงูููุช ูพุงูโุชุฑ ูุฑุงุฑ ุฏุงุฑุฏ.' },
                ];
                neighborhoodRankChart = new Chart(document.getElementById('neighborhoodRankChart').getContext('2d'), {
                    type: 'bar', data: { labels: neighborhoodData.map(d => d.neighborhood), datasets: [{ label: 'ูุงูฺฏู ุงูุชุงุฒ ููุง', data: neighborhoodData.map(d => d.score), backgroundColor: neighborhoodData.map(d => getGradientColor(d.priority, 8)), borderRadius: 4 }] },
                    options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: false, grid: { color: '#e2e8f0' }, ticks: { color: '#475569', font: { weight: 'bold' } } }, x: { grid: { display: false }, ticks: { color: '#334155', font: { weight: 'bold', size: 12 } } } }, plugins: { legend: { display: false }, tooltip: { rtl: true, titleFont: { family: 'Vazirmatn' }, bodyFont: { family: 'Vazirmatn' }, callbacks: { title: (context) => { const data = neighborhoodData[context[0].dataIndex]; return `${data.neighborhood} - ุงูููุช ${data.priority}`; }, afterBody: (context) => { const analysis = neighborhoodData[context[0].dataIndex].analysis; const wrapWidth = 40; let wrappedText = []; let currentLine = ''; analysis.split(' ').forEach(word => { if ((currentLine + word).length > wrapWidth) { wrappedText.push(currentLine); currentLine = ''; } currentLine += word + ' '; }); wrappedText.push(currentLine); return '\nุชุญูู ุฑุงูุจุฑุฏ:\n' + wrappedText.join('\n'); } } } } }
                });

                // --- Initial Load ---
                updateAllSliderUI();
                updateAllVisuals(baselineRankings);
                updateScenarioCard();
            }

            function setupAccordion() {
                const card = document.getElementById('control-panel-card');
                const header = document.getElementById('control-panel-header');
                const body = document.getElementById('control-panel-body');
                const arrow = document.getElementById('control-panel-arrow');
                const resetButton = document.getElementById('reset-weights');

                // --- Initial Collapsed State ---
                card.classList.add('closed');
                body.style.maxHeight = '0';
                resetButton.classList.add('hidden');

                header.addEventListener('click', () => {
                    const isOpen = body.style.maxHeight !== '0px';
                    if (isOpen) {
                        // Close it
                        body.style.maxHeight = '0px';
                        arrow.classList.remove('rotate-180');
                        resetButton.classList.add('hidden');
                        card.classList.add('closed');
                    } else {
                        // Open it
                        body.style.maxHeight = body.scrollHeight + 'px';
                        arrow.classList.add('rotate-180');
                        resetButton.classList.remove('hidden');
                        card.classList.remove('closed');
                    }
                });

                 window.addEventListener('resize', () => {
                    if (body.style.maxHeight !== '0px') {
                        body.style.maxHeight = body.scrollHeight + 'px';
                    }
                });
            }

            setupControls();
            setupAccordion();
        });
    </script>
</body>
</html>


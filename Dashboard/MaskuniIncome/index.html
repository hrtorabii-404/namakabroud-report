<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ ØªØ­Ù„ÛŒÙ„ Ø¯Ø±Ø¢Ù…Ø¯</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts (Vazirmatn for Persian) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f0f2f5; /* A softer, more professional background */
        }
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
        }
        .card {
            background-color: #ffffff;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .kpi-card, .insight-card {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .icon-bg {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            flex-shrink: 0;
        }
        .logo-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            height: 70px;
            width: auto;
            object-fit: contain;
        }
        .logo.center {
            height: 150px;
        }
        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        .tooltip-text {
            visibility: hidden;
            width: 240px;
            background-color: #374151; /* gray-700 */
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -120px;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            font-weight: normal;
        }
        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #374151 transparent transparent transparent;
        }
        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #a7a7a7; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #888; }
    </style>
</head>
<body class="p-4 md:p-6 lg:p-8">
    <div class="max-w-screen-xl mx-auto">
        <!-- Header -->
        <header class="mb-8">
             <div class="card mb-8">
                <div class="logo-container">
                    <img src="https://uploadkon.ir/uploads/c1c428_25logo-IMPcoPNG.png" alt="Ù„ÙˆÚ¯Ùˆ Ø§ÛŒØ¯Ù‡ Ù¾Ø±Ø¯Ø§Ø² Ù…Ø­ÛŒØ·" class="logo">
                    <img src="https://uploadkon.ir/uploads/df5427_25NA-LOGO-copy.png" alt="Ù„ÙˆÚ¯Ùˆ Ù†Ù…Ú© Ø¢Ø¨Ø±ÙˆØ¯" class="logo center">
                    <img src="https://uploadkon.ir/uploads/611127_25OMS-LOGO-copy.png" alt="Ù„ÙˆÚ¯Ùˆ Ø¹Ù…Ø±Ø§Ù† Ù…Ø³Ú©Ù† Ø´Ù…Ø§Ù„" class="logo">
                </div>
            </div>
            <div class="text-center">
                <h1 class="text-4xl font-extrabold text-slate-800">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ùˆ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ© Ø¯Ø±Ø¢Ù…Ø¯Ù‡Ø§ÛŒ Ù…Ø³Ú©ÙˆÙ†ÛŒ</h1>
                <p class="text-slate-500 mt-2 text-lg">ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ Ø¯Ø±Ø¢Ù…Ø¯Ù‡Ø§ Ø¨Ø±Ø§ÛŒ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ù† Ù…Ø¯ÛŒØ±ÛŒØªÛŒ</p>
            </div>
        </header>

        <main class="space-y-8">
            <!-- Management Report Summary Card -->
            <div class="card">
                <h2 class="text-2xl font-bold text-slate-800 mb-4">ğŸ“„ Ø®Ù„Ø§ØµÙ‡ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ (ÛŒØ§ÙØªÙ‡â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ)</h2>
                <div class="prose prose-sm max-w-none text-slate-600 space-y-4">
                     <p>
                        ØªØ­Ù„ÛŒÙ„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯Ù‡ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ù¾ÙˆØ±ØªÙÙˆÙ„ÛŒÙˆÛŒ Ø¯Ø±Ø¢Ù…Ø¯ÛŒ Ø´Ø±Ú©Øª Ø¨Ø³ÛŒØ§Ø± Ø¨Ø²Ø±Ú¯ Ùˆ Ù‚Ø§Ø¨Ù„ ØªÙˆØ¬Ù‡ Ø§Ø³Øª. Ù…Ø¬Ù…ÙˆØ¹ Ø¯Ø±Ø¢Ù…Ø¯ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒâ€ŒØ´Ø¯Ù‡ Ø¨Ø§Ù„Øº Ø¨Ø± <strong>Û¶Û² Ù‡Ø²Ø§Ø± Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯ ØªÙˆÙ…Ø§Ù†</strong> Ø§Ø³Øª. Ø­Ø¯ÙˆØ¯ <strong>Û´Û²Ùª</strong> Ø§Ø² Ø§ÛŒÙ† Ù…Ø¨Ù„Øº Ù‚Ø·Ø¹ÛŒ Ø´Ø¯Ù‡ØŒ Ø§Ù…Ø§ <strong>ÛµÛ¸Ùª</strong> Ø¯Ø± ÙˆØ¶Ø¹ÛŒØª "ÙØ§Ù‚Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯" ÛŒØ§ "Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¹Ù‚Ø§Ø¯" Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø¨Ø²Ø±Ú¯ØªØ±ÛŒÙ† ÙØ±ØµØª Ø±Ø´Ø¯ Ùˆ Ø¯Ø± Ø¹ÛŒÙ† Ø­Ø§Ù„ Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ø±ÛŒØ³Ú© Ø³Ø¨Ø¯ Ø¯Ø±Ø¢Ù…Ø¯ÛŒ Ø´Ø±Ú©Øª Ø§Ø³Øª.
                    </p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Ø±ÙØ¹ Ø§Ø¨Ù‡Ø§Ù… ÙÙˆØ±ÛŒ:</strong> Ø¨ÛŒØ´ Ø§Ø² <strong>Û´Û±Ùª</strong> Ø§Ø² Ø¯Ø±Ø¢Ù…Ø¯Ù‡Ø§ (Ø­Ø¯ÙˆØ¯ Û²Ûµ.Û· Ù‡Ø²Ø§Ø± Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯ ØªÙˆÙ…Ø§Ù†) Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø± <strong>"Ù†Ø§Ù…Ø´Ø®Øµ"</strong> Ø§Ø³Øª.</li>
                        <li><strong>ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©:</strong> ØªÙ†Ù‡Ø§ <strong>Û´ Ù¾Ø±ÙˆÚ˜Ù‡</strong> Ù…Ø³Ø¦ÙˆÙ„ ØªÙˆÙ„ÛŒØ¯ <strong>Û³Û³Ùª</strong> Ø§Ø² Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯ Ø´Ø±Ú©Øª Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ø¸Ø§Ø±Øª ÙˆÛŒÚ˜Ù‡ Ù…ÛŒâ€ŒØ¨Ø§Ø´Ù†Ø¯.</li>
                        <li><strong>Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÙˆØ¬ Ø¯Ø±Ø¢Ù…Ø¯ÛŒ:</strong> Ø§ÙˆØ¬ Ø¯Ø±Ø¢Ù…Ø¯Ø²Ø§ÛŒÛŒ Ø¯Ø± Ø³Ø§Ù„â€ŒÙ‡Ø§ÛŒ <strong>Û±Û´Û°Û¶ ØªØ§ Û±Û´Û°Û¸</strong> Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯ Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ­Ù‚Ù‚ Ø¢Ù† Ø¨Ø§ÛŒØ¯ Ø§Ø² Ù‡Ù…â€ŒØ§Ú©Ù†ÙˆÙ† Ø¢ØºØ§Ø² Ø´ÙˆØ¯.</li>
                    </ul>
                </div>
            </div>

            <!-- KPI Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                 <div class="card kpi-card">
                    <div class="icon-bg bg-green-100 text-green-600">ğŸ’°</div>
                    <div>
                        <h3 class="text-slate-500 font-medium">Ù…Ø¬Ù…ÙˆØ¹ Ø¯Ø±Ø¢Ù…Ø¯ Ø¨Ø±Ø¢ÙˆØ±Ø¯ÛŒ</h3>
                        <p id="total-revenue" class="text-2xl font-bold text-slate-800 mt-1">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                    </div>
                </div>
                 <div class="card kpi-card">
                    <div class="icon-bg bg-cyan-100 text-cyan-600">âœ…</div>
                    <div>
                        <h3 class="text-slate-500 font-medium">Ø¯Ø±Ø¢Ù…Ø¯ Ù‚Ø·Ø¹ÛŒ Ø´Ø¯Ù‡</h3>
                        <p id="confirmed-revenue" class="text-2xl font-bold text-slate-800 mt-1">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                    </div>
                </div>
                <div class="card kpi-card">
                    <div class="icon-bg bg-amber-100 text-amber-600">â³</div>
                    <div>
                        <h3 class="text-slate-500 font-medium">Ù¾ØªØ§Ù†Ø³ÛŒÙ„ (Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¹Ù‚Ø§Ø¯)</h3>
                        <p id="potential-revenue" class="text-2xl font-bold text-slate-800 mt-1">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                    </div>
                </div>
                <div class="card kpi-card">
                    <div class="icon-bg bg-rose-100 text-rose-600">ğŸš©</div>
                     <div>
                        <h3 class="text-slate-500 font-medium">Ø±ÛŒØ³Ú© (ÙØ§Ù‚Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯)</h3>
                        <p id="risk-revenue" class="text-2xl font-bold text-slate-800 mt-1">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                    </div>
                </div>
                <div class="card kpi-card">
                    <div class="icon-bg bg-blue-100 text-blue-600">ğŸ—ï¸</div>
                    <div>
                        <h3 class="text-slate-500 font-medium">ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h3>
                        <p id="total-projects" class="text-2xl font-bold text-slate-800 mt-1">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                    </div>
                </div>
                <div class="card kpi-card">
                    <div class="icon-bg bg-red-100 text-red-600">â“</div>
                    <div>
                        <h3 class="text-slate-500 font-medium">Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø± Ù†Ø§Ù…Ø´Ø®Øµ</h3>
                        <p id="unknown-investor" class="text-2xl font-bold text-slate-800 mt-1">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                    </div>
                </div>
                 <div class="card kpi-card">
                    <div class="icon-bg bg-yellow-100 text-yellow-600">âš ï¸</div>
                     <div>
                        <h3 class="text-slate-500 font-medium">Ù…Ø¬Ù…ÙˆØ¹ Ø¯Ø±Ø¢Ù…Ø¯ ØºÛŒØ±Ù‚Ø·Ø¹ÛŒ</h3>
                        <p id="unconfirmed-revenue" class="text-2xl font-bold text-slate-800 mt-1">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                    </div>
                </div>
            </div>
            
            <!-- Attractive Management Insight Cards -->
             <div class="card">
                <h2 class="text-2xl font-bold text-slate-800 mb-4">ğŸ’¡ Ù†Ú©Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="p-4 bg-orange-50 rounded-lg">
                         <div class="flex items-center gap-3">
                            <span class="text-3xl">ğŸ¯</span>
                            <div>
                                <p class="font-bold text-lg text-orange-800">ØªÙ…Ø±Ú©Ø² Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©</p>
                                <p class="text-sm text-orange-600"><strong>Û³Û³Ùª</strong> Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯ ÙÙ‚Ø· Ø§Ø² <strong>Û´ Ù¾Ø±ÙˆÚ˜Ù‡</strong> Ø§Ø³Øª.</p>
                            </div>
                        </div>
                    </div>
                     <div class="p-4 bg-red-50 rounded-lg">
                        <div class="flex items-center gap-3">
                            <span class="text-3xl">â—</span>
                             <div>
                                <p class="font-bold text-lg text-red-800">Ù¾ØªØ§Ù†Ø³ÛŒÙ„ Ùˆ Ø±ÛŒØ³Ú©</p>
                                <p class="text-sm text-red-600"><strong>ÛµÛ¸Ùª</strong> Ø¯Ø±Ø¢Ù…Ø¯ (Û³Û¶ Ù‡Ù…Øª) Ù‡Ù†ÙˆØ² Ù‚Ø·Ø¹ÛŒ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
                            </div>
                        </div>
                    </div>
                     <div class="p-4 bg-blue-50 rounded-lg">
                         <div class="flex items-center gap-3">
                            <span class="text-3xl">ğŸ“ˆ</span>
                             <div>
                                <p class="font-bold text-lg text-blue-800">Ø§ÙˆØ¬ Ø¯Ø±Ø¢Ù…Ø¯ÛŒ Ø¢ØªÛŒ</p>
                                <p class="text-sm text-blue-600"><strong>Û¸Û¶Ùª</strong> ÙØ±ÙˆØ´ Ø¢ØªÛŒ Ø¯Ø± Ø³Ø§Ù„â€ŒÙ‡Ø§ÛŒ <strong>Û±Û´Û°Û¶-Û±Û´Û°Û¸</strong> Ø§Ø³Øª.</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 bg-purple-50 rounded-lg">
                        <div class="flex items-center gap-3">
                            <span class="text-3xl">ğŸ”</span>
                             <div>
                                <p class="font-bold text-lg text-purple-800">Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø´ÙØ§Ùâ€ŒØ³Ø§Ø²ÛŒ</p>
                                <p class="text-sm text-purple-600"><strong>Û´Û±Ùª</strong> Ø¯Ø±Ø¢Ù…Ø¯ Ø§Ø² Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø± <strong>Ù†Ø§Ù…Ø´Ø®Øµ</strong> Ø§Ø³Øª.</p>
                            </div>
                        </div>
                    </div>
                 </div>
            </div>

            <!-- Main Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Investor Analysis -->
                <div class="card">
                    <h3 class="text-xl font-bold text-slate-800 mb-1">ğŸ¤ ØªØ­Ù„ÛŒÙ„ Ø¯Ø±Ø¢Ù…Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±</h3>
                    <p class="text-slate-500 mb-4 text-sm">Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø±Ú©Ø§ÛŒ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ© Ùˆ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ø´ÙØ§Ùâ€ŒØ³Ø§Ø²ÛŒ</p>
                    <div class="chart-container">
                        <canvas id="investorRevenueChart"></canvas>
                    </div>
                </div>
                 <!-- Yearly Projection Line Chart -->
                <div class="card">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">ğŸ“… Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø¬Ø±ÛŒØ§Ù† Ø¯Ø±Ø¢Ù…Ø¯ÛŒ Ø¢ØªÛŒ</h3>
                    <div class="chart-container">
                        <canvas id="yearlyProjectionChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                 <!-- Contract Status Doughnut Chart -->
                <div class="card">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">ğŸ“Š ØªÙÚ©ÛŒÚ© Ø¯Ø±Ø¢Ù…Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ¶Ø¹ÛŒØª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</h3>
                    <div class="chart-container">
                        <canvas id="contractStatusChart"></canvas>
                    </div>
                </div>
                 <!-- Pareto (Project Class) Bar Chart -->
                <div class="card">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">ğŸ¯ ØªØ­Ù„ÛŒÙ„ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ (Ù¾Ø§Ø±ØªÙˆ)</h3>
                    <div class="chart-container">
                        <canvas id="paretoChart"></canvas>
                    </div>
                </div>
            </div>
            
        </main>
        <!-- Footer Section -->
        <footer class="text-center py-8 mt-12 border-t border-gray-200">
            <p class="text-gray-600">
                ØªÙ‡ÛŒÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· 
                <span class="font-semibold text-teal-600 tooltip-container">
                    Ù…Ù‡Ù†Ø¯Ø³ÛŒÙ† Ù…Ø´Ø§ÙˆØ± Ø§ÛŒØ¯Ù‡ Ù¾Ø±Ø¯Ø§Ø² Ù…Ø­ÛŒØ·
                    <span class="tooltip-text">
                        <span class="font-bold block">ØªØ­Ù„ÛŒÙ„ Ùˆ Ø·Ø±Ø§Ø­ÛŒ : Ø­Ù…ÛŒØ¯Ø±Ø¶Ø§ ØªØ±Ø§Ø¨ÛŒ</span>
                        hr.torabii@gmail.com
                    </span>
                </span>
            </p>
            <p class="text-gray-500 mt-2">Ø´Ù‡Ø±ÛŒÙˆØ±Ù…Ø§Ù‡ Û±Û´Û°Û´</p>
        </footer>
    </div>

    <script>
        // --- Data from the NEW Management Report (in Billion Tomans) ---
        const reportData = {
            totalRevenue: 61995, // Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯ ØªÙˆÙ…Ø§Ù†
            contractStatus: {
                labels: ['Ø¯Ø§Ø±Ø§ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯', 'ÙØ§Ù‚Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯', 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¹Ù‚Ø§Ø¯'],
                data: [25927, 23128, 12940],
            },
            investors: {
                labels: ['Ù†Ø§Ù…Ø´Ø®Øµ', 'Ø´Ø±Ú©Øª Ø¢Ú©Ø§Ù… ÙÙˆÙ„Ø§Ø¯', 'Ù„ÙˆØªÙˆØ³ Ù…Ù‡Ø± Ø§ÛŒØ±Ø§Ù†ÛŒØ§Ù†', 'Ø¢ØªÛŒÙ‡ Ø³Ø§Ø²Ø§Ù† Ù‡Ù…Ú©Ø§Ø±Ø§Ù†', 'Ø³Ø§ÛŒØ± Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§'],
                data: [25671, 5453, 5415, 4855, 20601], 
            },
            pareto: {
                labels: ['A (Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©)', 'B (Ù…Ù‡Ù…)', 'C (Ù…Ø¹Ù…ÙˆÙ„ÛŒ)'],
                data: [20447, 39071, 2477]
            },
            yearly: {
                labels: ['1405', '1406', '1407', '1408', '1409'],
                data: [1660, 17888, 15921, 15521, 5891]
            }
        };

        document.addEventListener('DOMContentLoaded', function () {
            
            Chart.defaults.font.family = 'Vazirmatn';
            Chart.defaults.font.size = 12;
            Chart.defaults.color = '#64748b';

            const formatDynamicValue = (num_billion_toman, isCurrency = true) => {
                if (!isCurrency) {
                    return num_billion_toman.toLocaleString('fa-IR');
                }
                if (num_billion_toman >= 1000) {
                    const hemt = num_billion_toman / 1000;
                    return `${hemt.toFixed(1)} Ù‡Ù…Øª`;
                }
                return `${num_billion_toman.toLocaleString('fa-IR')} Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯ ØªÙˆÙ…Ø§Ù†`;
            };
            
            const totalProjects = 27; // From report context

            // --- Update KPIs ---
            document.getElementById('total-revenue').textContent = formatDynamicValue(reportData.totalRevenue);
            document.getElementById('confirmed-revenue').textContent = formatDynamicValue(reportData.contractStatus.data[0]);
            document.getElementById('potential-revenue').textContent = formatDynamicValue(reportData.contractStatus.data[2]);
            document.getElementById('risk-revenue').textContent = formatDynamicValue(reportData.contractStatus.data[1]);
            const unconfirmedRevenue = reportData.contractStatus.data[1] + reportData.contractStatus.data[2];
            document.getElementById('unconfirmed-revenue').textContent = formatDynamicValue(unconfirmedRevenue);
            document.getElementById('total-projects').textContent = formatDynamicValue(totalProjects, false);
            document.getElementById('unknown-investor').textContent = formatDynamicValue(reportData.investors.data[0]);
            
            // --- Chart 1: Investor Revenue ---
            new Chart(document.getElementById('investorRevenueChart'), {
                type: 'bar',
                data: {
                    labels: reportData.investors.labels,
                    datasets: [{
                        data: reportData.investors.data,
                        backgroundColor: ['#ef4444', '#8b5cf6', '#6366f1', '#3b82f6', '#14b8a6'],
                        borderRadius: 8,
                        barPercentage: 0.7
                    }]
                },
                options: {
                    indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: { callbacks: { label: (c) => `${c.label}: ${formatDynamicValue(c.raw)}` } }
                    },
                    scales: {
                        x: { title: { display: true, text: 'Ù‡Ø²Ø§Ø± Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯ ØªÙˆÙ…Ø§Ù† (Ù‡Ù…Øª)' }, ticks: { callback: (val) => val / 1000 } },
                        y: { ticks: { font: { size: 14 } } }
                    }
                }
            });

            // --- Chart 2: Yearly Projection ---
            const ctx2 = document.getElementById('yearlyProjectionChart').getContext('2d');
            const lineGradient = ctx2.createLinearGradient(0, 0, 0, 300);
            lineGradient.addColorStop(0, 'rgba(59, 130, 246, 0.5)');
            lineGradient.addColorStop(1, 'rgba(59, 130, 246, 0)');
            new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: reportData.yearly.labels,
                    datasets: [{
                        label: 'Ø¯Ø±Ø¢Ù…Ø¯', data: reportData.yearly.data,
                        borderColor: '#3b82f6', backgroundColor: lineGradient,
                        fill: true, tension: 0.4, pointBackgroundColor: '#3b82f6',
                        pointRadius: 5, pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => ` ${formatDynamicValue(c.raw)}` } } },
                    scales: { y: { ticks: { callback: (val) => `${formatDynamicValue(val)}` } } }
                }
            });

            // --- Chart 3: Contract Status ---
            new Chart(document.getElementById('contractStatusChart'), {
                type: 'doughnut',
                data: {
                    labels: reportData.contractStatus.labels,
                    datasets: [{
                        data: reportData.contractStatus.data,
                        backgroundColor: ['#10b981', '#ef4444', '#f97316'],
                        borderColor: '#ffffff', borderWidth: 4, hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, cutout: '70%',
                    plugins: { legend: { position: 'bottom', labels: { padding: 20 } },
                    tooltip: { callbacks: { label: (c) => `${c.label}: ${formatDynamicValue(c.raw)}` } } }
                }
            });
            
             // --- Chart 4: Pareto Analysis ---
            new Chart(document.getElementById('paretoChart'), {
                type: 'bar',
                data: {
                    labels: reportData.pareto.labels,
                    datasets: [{
                        data: reportData.pareto.data,
                        backgroundColor: ['#4f46e5', '#3b82f6', '#14b8a6'],
                        borderRadius: 8, barPercentage: 0.6
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => ` ${formatDynamicValue(c.raw)}` } } },
                    scales: { y: { ticks: { callback: (val) => `${formatDynamicValue(val)}` } } }
                }
            });
        });
    </script>
<script>
window.addEventListener('keydown', function(e){
  if (e.key === 'Backspace') {
    const el = e.target;
    const tag = el && el.tagName;
    const isEditable = tag === 'INPUT' || tag === 'TEXTAREA' || (el && el.isContentEditable);
    if (!isEditable) {
      e.preventDefault();
      // Ù¾ÛŒØ§Ù… Ø¨Ù‡ ÙˆØ§Ù„Ø¯ Ø¨ÙØ±Ø³Øª (Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ)
      window.parent.postMessage({ type: 'NAVIGATE_BACK' }, '*');
    }
  }
});
</script>

</body>
</html>

